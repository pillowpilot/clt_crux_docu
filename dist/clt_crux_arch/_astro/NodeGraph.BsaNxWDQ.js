import{j as S}from"./jsx-runtime.Dd8RM4Z7.js";import{r as y,R as M}from"./index.BJb7hJaF.js";import{r as er}from"./index.BfnRIxCg.js";import{g as tr}from"./_commonjsHelpers.BosuxZz1.js";import{s as pe,k as po,l as $e,T as jt,m as Ht}from"./transform.CGKONemN.js";import{n as Rn}from"./router.i7oCmmPI.js";function nr({title:e,titleId:t,...n},o){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?y.createElement("title",{id:t},e):null,y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 1-11-4.69v.447a3.5 3.5 0 0 0 1.025 2.475L8.293 10 8 10.293a1 1 0 0 0 0 1.414l1.06 1.06a1.5 1.5 0 0 1 .44 1.061v.363a1 1 0 0 0 .553.894l.276.139a1 1 0 0 0 1.342-.448l1.454-2.908a1.5 1.5 0 0 0-.281-1.731l-.772-.772a1 1 0 0 0-1.023-.242l-.384.128a.5.5 0 0 1-.606-.25l-.296-.592a.481.481 0 0 1 .646-.646l.262.131a1 1 0 0 0 .447.106h.188a1 1 0 0 0 .949-1.316l-.068-.204a.5.5 0 0 1 .149-.538l1.44-1.234A6.492 6.492 0 0 1 16.5 10Z",clipRule:"evenodd"}))}const or=y.forwardRef(nr);function sr({title:e,titleId:t,...n},o){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?y.createElement("title",{id:t},e):null,y.createElement("path",{d:"M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"}))}const rr=y.forwardRef(sr);function ir({title:e,titleId:t,...n},o){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?y.createElement("title",{id:t},e):null,y.createElement("path",{fillRule:"evenodd",d:"M9.58 1.077a.75.75 0 0 1 .405.82L9.165 6h4.085a.75.75 0 0 1 .567 1.241l-6.5 7.5a.75.75 0 0 1-1.302-.638L6.835 10H2.75a.75.75 0 0 1-.567-1.241l6.5-7.5a.75.75 0 0 1 .897-.182Z",clipRule:"evenodd"}))}const ar=y.forwardRef(ir);function cr({title:e,titleId:t,...n},o){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?y.createElement("title",{id:t},e):null,y.createElement("path",{d:"M1 8.74c0 .983.713 1.825 1.69 1.943.764.092 1.534.164 2.31.216v2.351a.75.75 0 0 0 1.28.53l2.51-2.51c.182-.181.427-.286.684-.294a44.298 44.298 0 0 0 3.837-.293C14.287 10.565 15 9.723 15 8.74V4.26c0-.983-.713-1.825-1.69-1.943a44.447 44.447 0 0 0-10.62 0C1.712 2.435 1 3.277 1 4.26v4.482Z"}))}const lr=y.forwardRef(cr);function ur({title:e,titleId:t,...n},o){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?y.createElement("title",{id:t},e):null,y.createElement("path",{d:"M3.665 3.588A2 2 0 0 1 5.622 2h4.754a2 2 0 0 1 1.958 1.588l1.098 5.218a3.487 3.487 0 0 0-1.433-.306H4c-.51 0-.995.11-1.433.306l1.099-5.218Z"}),y.createElement("path",{fillRule:"evenodd",d:"M4 10a2 2 0 1 0 0 4h8a2 2 0 1 0 0-4H4Zm8 2.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM9.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z",clipRule:"evenodd"}))}const dr=y.forwardRef(ur);function fr({title:e,titleId:t,...n},o){return y.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},n),e?y.createElement("title",{id:t},e):null,y.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const hr=y.forwardRef(fr);function ie(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ie(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yo={exports:{}},xo={},wo={exports:{}},bo={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et=y;function mr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gr=typeof Object.is=="function"?Object.is:mr,pr=et.useState,yr=et.useEffect,xr=et.useLayoutEffect,wr=et.useDebugValue;function br(e,t){var n=t(),o=pr({inst:{value:n,getSnapshot:t}}),s=o[0].inst,r=o[1];return xr(function(){s.value=n,s.getSnapshot=t,Ot(s)&&r({inst:s})},[e,n,t]),yr(function(){return Ot(s)&&r({inst:s}),e(function(){Ot(s)&&r({inst:s})})},[e]),wr(n),n}function Ot(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gr(e,n)}catch{return!0}}function Er(e,t){return t()}var Sr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Er:br;bo.useSyncExternalStore=et.useSyncExternalStore!==void 0?et.useSyncExternalStore:Sr;wo.exports=bo;var vr=wo.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $t=y,Nr=vr;function Cr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mr=typeof Object.is=="function"?Object.is:Cr,kr=Nr.useSyncExternalStore,$r=$t.useRef,Rr=$t.useEffect,Tr=$t.useMemo,_r=$t.useDebugValue;xo.useSyncExternalStoreWithSelector=function(e,t,n,o,s){var r=$r(null);if(r.current===null){var i={hasValue:!1,value:null};r.current=i}else i=r.current;r=Tr(function(){function c(g){if(!d){if(d=!0,l=g,g=o(g),s!==void 0&&i.hasValue){var v=i.value;if(s(v,g))return f=v}return f=g}if(v=f,Mr(l,g))return v;var x=o(g);return s!==void 0&&s(v,x)?v:(l=g,f=x)}var d=!1,l,f,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,o,s]);var a=kr(e,r[0],r[1]);return Rr(function(){i.hasValue=!0,i.value=a},[a]),_r(a),a};yo.exports=xo;var zr=yo.exports;const Ir=tr(zr),Ar={ASSETS_PREFIX:void 0,BASE_URL:"/clt_crux_arch/",DEV:!1,MODE:"production",PROD:!0,SITE:"https://eventcatalog.dev/",SSR:!1},Tn=e=>{let t;const n=new Set,o=(l,f)=>{const h=typeof l=="function"?l(t):l;if(!Object.is(h,t)){const g=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(v=>v(t,g))}},s=()=>t,c={setState:o,getState:s,getInitialState:()=>d,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(Ar?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(o,s,c);return c},Pr=e=>e?Tn(e):Tn,{useDebugValue:Dr}=M,{useSyncExternalStoreWithSelector:jr}=Ir,Hr=e=>e;function Eo(e,t=Hr,n){const o=jr(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Dr(o),o}const _n=(e,t)=>{const n=Pr(e),o=(s,r=t)=>Eo(n,s,r);return Object.assign(o,n),o},Or=(e,t)=>e?_n(e,t):_n;function ce(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,s]of e)if(!Object.is(s,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}function Vr(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ee(e,t){if(e=Vr(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const Lr={passive:!1},ut={capture:!0,passive:!1};function Vt(e){e.stopImmediatePropagation()}function qe(e){e.preventDefault(),e.stopImmediatePropagation()}function So(e){var t=e.document.documentElement,n=pe(e).on("dragstart.drag",qe,ut);"onselectstart"in t?n.on("selectstart.drag",qe,ut):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function vo(e,t){var n=e.document.documentElement,o=pe(e).on("dragstart.drag",null);t&&(o.on("click.drag",qe,ut),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pt=e=>()=>e;function en(e,{sourceEvent:t,subject:n,target:o,identifier:s,active:r,x:i,y:a,dx:c,dy:d,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:l}})}en.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Fr(e){return!e.ctrlKey&&!e.button}function Br(){return this.parentNode}function Ur(e,t){return t??{x:e.x,y:e.y}}function Zr(){return navigator.maxTouchPoints||"ontouchstart"in this}function Wr(){var e=Fr,t=Br,n=Ur,o=Zr,s={},r=po("start","drag","end"),i=0,a,c,d,l,f=0;function h(p){p.on("mousedown.drag",g).filter(o).on("touchstart.drag",E).on("touchmove.drag",m,Lr).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(p,$){if(!(l||!e.call(this,p,$))){var T=k(this,t.call(this,p,$),p,$,"mouse");T&&(pe(p.view).on("mousemove.drag",v,ut).on("mouseup.drag",x,ut),So(p.view),Vt(p),d=!1,a=p.clientX,c=p.clientY,T("start",p))}}function v(p){if(qe(p),!d){var $=p.clientX-a,T=p.clientY-c;d=$*$+T*T>f}s.mouse("drag",p)}function x(p){pe(p.view).on("mousemove.drag mouseup.drag",null),vo(p.view,d),qe(p),s.mouse("end",p)}function E(p,$){if(e.call(this,p,$)){var T=p.changedTouches,j=t.call(this,p,$),z=T.length,I,O;for(I=0;I<z;++I)(O=k(this,j,p,$,T[I].identifier,T[I]))&&(Vt(p),O("start",p,T[I]))}}function m(p){var $=p.changedTouches,T=$.length,j,z;for(j=0;j<T;++j)(z=s[$[j].identifier])&&(qe(p),z("drag",p,$[j]))}function N(p){var $=p.changedTouches,T=$.length,j,z;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),j=0;j<T;++j)(z=s[$[j].identifier])&&(Vt(p),z("end",p,$[j]))}function k(p,$,T,j,z,I){var O=r.copy(),V=Ee(I||T,$),L,H,u;if((u=n.call(p,new en("beforestart",{sourceEvent:T,target:h,identifier:z,active:i,x:V[0],y:V[1],dx:0,dy:0,dispatch:O}),j))!=null)return L=u.x-V[0]||0,H=u.y-V[1]||0,function C(w,R,P){var b=V,_;switch(w){case"start":s[z]=C,_=i++;break;case"end":delete s[z],--i;case"drag":V=Ee(P||R,$),_=i;break}O.call(w,p,new en(w,{sourceEvent:R,subject:u,target:h,identifier:z,active:_,x:V[0]+L,y:V[1]+H,dx:V[0]-b[0],dy:V[1]-b[1],dispatch:O}),j)}}return h.filter=function(p){return arguments.length?(e=typeof p=="function"?p:pt(!!p),h):e},h.container=function(p){return arguments.length?(t=typeof p=="function"?p:pt(p),h):t},h.subject=function(p){return arguments.length?(n=typeof p=="function"?p:pt(p),h):n},h.touchable=function(p){return arguments.length?(o=typeof p=="function"?p:pt(!!p),h):o},h.on=function(){var p=r.on.apply(r,arguments);return p===r?h:p},h.clickDistance=function(p){return arguments.length?(f=(p=+p)*p,h):Math.sqrt(f)},h}var Yr=1e-12;function zn(e){return((e=Math.exp(e))+1/e)/2}function Xr(e){return((e=Math.exp(e))-1/e)/2}function Gr(e){return((e=Math.exp(2*e))-1)/(e+1)}const Kr=function e(t,n,o){function s(r,i){var a=r[0],c=r[1],d=r[2],l=i[0],f=i[1],h=i[2],g=l-a,v=f-c,x=g*g+v*v,E,m;if(x<Yr)m=Math.log(h/d)/t,E=function(j){return[a+j*g,c+j*v,d*Math.exp(t*j*m)]};else{var N=Math.sqrt(x),k=(h*h-d*d+o*x)/(2*d*n*N),p=(h*h-d*d-o*x)/(2*h*n*N),$=Math.log(Math.sqrt(k*k+1)-k),T=Math.log(Math.sqrt(p*p+1)-p);m=(T-$)/t,E=function(j){var z=j*m,I=zn($),O=d/(n*N)*(I*Gr(t*z+$)-Xr($));return[a+O*g,c+O*v,d*I/zn(t*z+$)]}}return E.duration=m*1e3*t/Math.SQRT2,E}return s.rho=function(r){var i=Math.max(.001,+r),a=i*i,c=a*a;return e(i,a,c)},s}(Math.SQRT2,2,4),yt=e=>()=>e;function qr(e,{sourceEvent:t,target:n,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function Lt(e){e.stopImmediatePropagation()}function rt(e){e.preventDefault(),e.stopImmediatePropagation()}function Qr(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Jr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function In(){return this.__zoom||$e}function ei(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ti(){return navigator.maxTouchPoints||"ontouchstart"in this}function ni(e,t,n){var o=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i))}function oi(){var e=Qr,t=Jr,n=ni,o=ei,s=ti,r=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Kr,d=po("start","zoom","end"),l,f,h,g=500,v=150,x=0,E=10;function m(u){u.property("__zoom",In).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",V).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(u,C,w,R){var P=u.selection?u.selection():u;P.property("__zoom",In),u!==P?$(u,C,w,R):P.interrupt().each(function(){T(this,arguments).event(R).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},m.scaleBy=function(u,C,w,R){m.scaleTo(u,function(){var P=this.__zoom.k,b=typeof C=="function"?C.apply(this,arguments):C;return P*b},w,R)},m.scaleTo=function(u,C,w,R){m.transform(u,function(){var P=t.apply(this,arguments),b=this.__zoom,_=w==null?p(P):typeof w=="function"?w.apply(this,arguments):w,A=b.invert(_),D=typeof C=="function"?C.apply(this,arguments):C;return n(k(N(b,D),_,A),P,i)},w,R)},m.translateBy=function(u,C,w,R){m.transform(u,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),i)},null,R)},m.translateTo=function(u,C,w,R,P){m.transform(u,function(){var b=t.apply(this,arguments),_=this.__zoom,A=R==null?p(b):typeof R=="function"?R.apply(this,arguments):R;return n($e.translate(A[0],A[1]).scale(_.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof w=="function"?-w.apply(this,arguments):-w),b,i)},R,P)};function N(u,C){return C=Math.max(r[0],Math.min(r[1],C)),C===u.k?u:new jt(C,u.x,u.y)}function k(u,C,w){var R=C[0]-w[0]*u.k,P=C[1]-w[1]*u.k;return R===u.x&&P===u.y?u:new jt(u.k,R,P)}function p(u){return[(+u[0][0]+ +u[1][0])/2,(+u[0][1]+ +u[1][1])/2]}function $(u,C,w,R){u.on("start.zoom",function(){T(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(R).end()}).tween("zoom",function(){var P=this,b=arguments,_=T(P,b).event(R),A=t.apply(P,b),D=w==null?p(A):typeof w=="function"?w.apply(P,b):w,B=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),F=P.__zoom,W=typeof C=="function"?C.apply(P,b):C,X=c(F.invert(D).concat(B/F.k),W.invert(D).concat(B/W.k));return function(G){if(G===1)G=W;else{var K=X(G),ee=B/K[2];G=new jt(ee,D[0]-K[0]*ee,D[1]-K[1]*ee)}_.zoom(null,G)}})}function T(u,C,w){return!w&&u.__zooming||new j(u,C)}function j(u,C){this.that=u,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(u,C),this.taps=0}j.prototype={event:function(u){return u&&(this.sourceEvent=u),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(u,C){return this.mouse&&u!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&u!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&u!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(u){var C=pe(this.that).datum();d.call(u,this.that,new qr(u,{sourceEvent:this.sourceEvent,target:m,type:u,transform:this.that.__zoom,dispatch:d}),C)}};function z(u,...C){if(!e.apply(this,arguments))return;var w=T(this,C).event(u),R=this.__zoom,P=Math.max(r[0],Math.min(r[1],R.k*Math.pow(2,o.apply(this,arguments)))),b=Ee(u);if(w.wheel)(w.mouse[0][0]!==b[0]||w.mouse[0][1]!==b[1])&&(w.mouse[1]=R.invert(w.mouse[0]=b)),clearTimeout(w.wheel);else{if(R.k===P)return;w.mouse=[b,R.invert(b)],Ht(this),w.start()}rt(u),w.wheel=setTimeout(_,v),w.zoom("mouse",n(k(N(R,P),w.mouse[0],w.mouse[1]),w.extent,i));function _(){w.wheel=null,w.end()}}function I(u,...C){if(h||!e.apply(this,arguments))return;var w=u.currentTarget,R=T(this,C,!0).event(u),P=pe(u.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",B,!0),b=Ee(u,w),_=u.clientX,A=u.clientY;So(u.view),Lt(u),R.mouse=[b,this.__zoom.invert(b)],Ht(this),R.start();function D(F){if(rt(F),!R.moved){var W=F.clientX-_,X=F.clientY-A;R.moved=W*W+X*X>x}R.event(F).zoom("mouse",n(k(R.that.__zoom,R.mouse[0]=Ee(F,w),R.mouse[1]),R.extent,i))}function B(F){P.on("mousemove.zoom mouseup.zoom",null),vo(F.view,R.moved),rt(F),R.event(F).end()}}function O(u,...C){if(e.apply(this,arguments)){var w=this.__zoom,R=Ee(u.changedTouches?u.changedTouches[0]:u,this),P=w.invert(R),b=w.k*(u.shiftKey?.5:2),_=n(k(N(w,b),R,P),t.apply(this,C),i);rt(u),a>0?pe(this).transition().duration(a).call($,_,R,u):pe(this).call(m.transform,_,R,u)}}function V(u,...C){if(e.apply(this,arguments)){var w=u.touches,R=w.length,P=T(this,C,u.changedTouches.length===R).event(u),b,_,A,D;for(Lt(u),_=0;_<R;++_)A=w[_],D=Ee(A,this),D=[D,this.__zoom.invert(D),A.identifier],P.touch0?!P.touch1&&P.touch0[2]!==D[2]&&(P.touch1=D,P.taps=0):(P.touch0=D,b=!0,P.taps=1+!!l);l&&(l=clearTimeout(l)),b&&(P.taps<2&&(f=D[0],l=setTimeout(function(){l=null},g)),Ht(this),P.start())}}function L(u,...C){if(this.__zooming){var w=T(this,C).event(u),R=u.changedTouches,P=R.length,b,_,A,D;for(rt(u),b=0;b<P;++b)_=R[b],A=Ee(_,this),w.touch0&&w.touch0[2]===_.identifier?w.touch0[0]=A:w.touch1&&w.touch1[2]===_.identifier&&(w.touch1[0]=A);if(_=w.that.__zoom,w.touch1){var B=w.touch0[0],F=w.touch0[1],W=w.touch1[0],X=w.touch1[1],G=(G=W[0]-B[0])*G+(G=W[1]-B[1])*G,K=(K=X[0]-F[0])*K+(K=X[1]-F[1])*K;_=N(_,Math.sqrt(G/K)),A=[(B[0]+W[0])/2,(B[1]+W[1])/2],D=[(F[0]+X[0])/2,(F[1]+X[1])/2]}else if(w.touch0)A=w.touch0[0],D=w.touch0[1];else return;w.zoom("touch",n(k(_,A,D),w.extent,i))}}function H(u,...C){if(this.__zooming){var w=T(this,C).event(u),R=u.changedTouches,P=R.length,b,_;for(Lt(u),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),b=0;b<P;++b)_=R[b],w.touch0&&w.touch0[2]===_.identifier?delete w.touch0:w.touch1&&w.touch1[2]===_.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(_=Ee(_,this),Math.hypot(f[0]-_[0],f[1]-_[1])<E)){var A=pe(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return m.wheelDelta=function(u){return arguments.length?(o=typeof u=="function"?u:yt(+u),m):o},m.filter=function(u){return arguments.length?(e=typeof u=="function"?u:yt(!!u),m):e},m.touchable=function(u){return arguments.length?(s=typeof u=="function"?u:yt(!!u),m):s},m.extent=function(u){return arguments.length?(t=typeof u=="function"?u:yt([[+u[0][0],+u[0][1]],[+u[1][0],+u[1][1]]]),m):t},m.scaleExtent=function(u){return arguments.length?(r[0]=+u[0],r[1]=+u[1],m):[r[0],r[1]]},m.translateExtent=function(u){return arguments.length?(i[0][0]=+u[0][0],i[1][0]=+u[1][0],i[0][1]=+u[0][1],i[1][1]=+u[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(u){return arguments.length?(n=u,m):n},m.duration=function(u){return arguments.length?(a=+u,m):a},m.interpolate=function(u){return arguments.length?(c=u,m):c},m.on=function(){var u=d.on.apply(d,arguments);return u===d?m:u},m.clickDistance=function(u){return arguments.length?(x=(u=+u)*u,m):Math.sqrt(x)},m.tapDistance=function(u){return arguments.length?(E=+u,m):E},m}const Rt=y.createContext(null),si=Rt.Provider,Ce={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},No=Ce.error001();function J(e,t){const n=y.useContext(Rt);if(n===null)throw new Error(No);return Eo(n,e,t)}const oe=()=>{const e=y.useContext(Rt);if(e===null)throw new Error(No);return y.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ri=e=>e.userSelectionActive?"none":"all";function dt({position:e,children:t,className:n,style:o,...s}){const r=J(ri),i=`${e}`.split("-");return M.createElement("div",{className:ie(["react-flow__panel",n,...i]),style:{...o,pointerEvents:r},...s},t)}function ii({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:M.createElement(dt,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},M.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const ai=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:r={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:c,className:d,...l})=>{const f=y.useRef(null),[h,g]=y.useState({x:0,y:0,width:0,height:0}),v=ie(["react-flow__edge-textwrapper",d]);return y.useEffect(()=>{if(f.current){const x=f.current.getBBox();g({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),typeof n>"u"||!n?null:M.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:v,visibility:h.width?"visible":"hidden",...l},s&&M.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:r,rx:a,ry:a}),M.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:o},n),c)};var ci=y.memo(ai);const dn=e=>({width:e.offsetWidth,height:e.offsetHeight}),tt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),fn=(e={x:0,y:0},t)=>({x:tt(e.x,t[0][0],t[1][0]),y:tt(e.y,t[0][1],t[1][1])}),An=(e,t,n)=>e<t?tt(Math.abs(e-t),1,50)/50:e>n?-tt(Math.abs(e-n),1,50)/50:0,Co=(e,t)=>{const n=An(e.x,35,t.width-35)*20,o=An(e.y,35,t.height-35)*20;return[n,o]},Mo=e=>e.getRootNode?.()||window?.document,li=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),hn=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),ui=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Pn=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),tn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},di=e=>he(e.width)&&he(e.height)&&he(e.x)&&he(e.y),he=e=>!isNaN(e)&&isFinite(e),te=Symbol.for("internals"),ko=["Enter"," ","Escape"],fi=(e,t)=>{},hi=e=>"nativeEvent"in e;function nn(e){const n=(hi(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const $o=e=>"clientX"in e,Re=(e,t)=>{const n=$o(e),o=n?e.clientX:e.touches?.[0].clientX,s=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:s-(t?.top??0)}},vt=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,mt=({id:e,path:t,labelX:n,labelY:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d,style:l,markerEnd:f,markerStart:h,interactionWidth:g=20})=>M.createElement(M.Fragment,null,M.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),g&&M.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&he(n)&&he(o)?M.createElement(ci,{x:n,y:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d}):null);mt.displayName="BaseEdge";function it(e,t,n){return n===void 0?n:o=>{const s=t().edges.find(r=>r.id===e);s&&n(o,{...s})}}function Ro({sourceX:e,sourceY:t,targetX:n,targetY:o}){const s=Math.abs(n-e)/2,r=n<e?n+s:n-s,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[r,a,s,i]}function To({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:s,sourceControlY:r,targetControlX:i,targetControlY:a}){const c=e*.125+s*.375+i*.375+n*.125,d=t*.125+r*.375+a*.375+o*.125,l=Math.abs(c-e),f=Math.abs(d-t);return[c,d,l,f]}var Oe;(function(e){e.Strict="strict",e.Loose="loose"})(Oe||(Oe={}));var He;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(He||(He={}));var ft;(function(e){e.Partial="partial",e.Full="full"})(ft||(ft={}));var ve;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ve||(ve={}));var Nt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Nt||(Nt={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));function Dn({pos:e,x1:t,y1:n,x2:o,y2:s}){return e===U.Left||e===U.Right?[.5*(t+o),n]:[t,.5*(n+s)]}function _o({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:s,targetPosition:r=U.Top}){const[i,a]=Dn({pos:n,x1:e,y1:t,x2:o,y2:s}),[c,d]=Dn({pos:r,x1:o,y1:s,x2:e,y2:t}),[l,f,h,g]=To({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:d});return[`M${e},${t} C${i},${a} ${c},${d} ${o},${s}`,l,f,h,g]}const mn=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:s=U.Bottom,targetPosition:r=U.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:v,interactionWidth:x})=>{const[E,m,N]=_o({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:o,targetPosition:r});return M.createElement(mt,{path:E,labelX:m,labelY:N,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:v,interactionWidth:x})});mn.displayName="SimpleBezierEdge";const jn={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},mi=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Hn=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function gi({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:o=U.Top,center:s,offset:r}){const i=jn[t],a=jn[o],c={x:e.x+i.x*r,y:e.y+i.y*r},d={x:n.x+a.x*r,y:n.y+a.y*r},l=mi({source:c,sourcePosition:t,target:d}),f=l.x!==0?"x":"y",h=l[f];let g=[],v,x;const E={x:0,y:0},m={x:0,y:0},[N,k,p,$]=Ro({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*a[f]===-1){v=s.x??N,x=s.y??k;const j=[{x:v,y:c.y},{x:v,y:d.y}],z=[{x:c.x,y:x},{x:d.x,y:x}];i[f]===h?g=f==="x"?j:z:g=f==="x"?z:j}else{const j=[{x:c.x,y:d.y}],z=[{x:d.x,y:c.y}];if(f==="x"?g=i.x===h?z:j:g=i.y===h?j:z,t===o){const H=Math.abs(e[f]-n[f]);if(H<=r){const u=Math.min(r-1,r-H);i[f]===h?E[f]=(c[f]>e[f]?-1:1)*u:m[f]=(d[f]>n[f]?-1:1)*u}}if(t!==o){const H=f==="x"?"y":"x",u=i[f]===a[H],C=c[H]>d[H],w=c[H]<d[H];(i[f]===1&&(!u&&C||u&&w)||i[f]!==1&&(!u&&w||u&&C))&&(g=f==="x"?j:z)}const I={x:c.x+E.x,y:c.y+E.y},O={x:d.x+m.x,y:d.y+m.y},V=Math.max(Math.abs(I.x-g[0].x),Math.abs(O.x-g[0].x)),L=Math.max(Math.abs(I.y-g[0].y),Math.abs(O.y-g[0].y));V>=L?(v=(I.x+O.x)/2,x=g[0].y):(v=g[0].x,x=(I.y+O.y)/2)}return[[e,{x:c.x+E.x,y:c.y+E.y},...g,{x:d.x+m.x,y:d.y+m.y},n],v,x,p,$]}function pi(e,t,n,o){const s=Math.min(Hn(e,t)/2,Hn(t,n)/2,o),{x:r,y:i}=t;if(e.x===r&&r===n.x||e.y===i&&i===n.y)return`L${r} ${i}`;if(e.y===i){const d=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${r+s*d},${i}Q ${r},${i} ${r},${i+s*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${r},${i+s*c}Q ${r},${i} ${r+s*a},${i}`}function on({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:s,targetPosition:r=U.Top,borderRadius:i=5,centerX:a,centerY:c,offset:d=20}){const[l,f,h,g,v]=gi({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:s},targetPosition:r,center:{x:a,y:c},offset:d});return[l.reduce((E,m,N)=>{let k="";return N>0&&N<l.length-1?k=pi(l[N-1],m,l[N+1],i):k=`${N===0?"M":"L"}${m.x} ${m.y}`,E+=k,E},""),f,h,g,v]}const Tt=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d,style:l,sourcePosition:f=U.Bottom,targetPosition:h=U.Top,markerEnd:g,markerStart:v,pathOptions:x,interactionWidth:E})=>{const[m,N,k]=on({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:o,targetPosition:h,borderRadius:x?.borderRadius,offset:x?.offset});return M.createElement(mt,{path:m,labelX:N,labelY:k,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d,style:l,markerEnd:g,markerStart:v,interactionWidth:E})});Tt.displayName="SmoothStepEdge";const gn=y.memo(e=>M.createElement(Tt,{...e,pathOptions:y.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));gn.displayName="StepEdge";function yi({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[s,r,i,a]=Ro({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,s,r,i,a]}const pn=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d,style:l,markerEnd:f,markerStart:h,interactionWidth:g})=>{const[v,x,E]=yi({sourceX:e,sourceY:t,targetX:n,targetY:o});return M.createElement(mt,{path:v,labelX:x,labelY:E,label:s,labelStyle:r,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d,style:l,markerEnd:f,markerStart:h,interactionWidth:g})});pn.displayName="StraightEdge";function xt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function On({pos:e,x1:t,y1:n,x2:o,y2:s,c:r}){switch(e){case U.Left:return[t-xt(t-o,r),n];case U.Right:return[t+xt(o-t,r),n];case U.Top:return[t,n-xt(n-s,r)];case U.Bottom:return[t,n+xt(s-n,r)]}}function zo({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:o,targetY:s,targetPosition:r=U.Top,curvature:i=.25}){const[a,c]=On({pos:n,x1:e,y1:t,x2:o,y2:s,c:i}),[d,l]=On({pos:r,x1:o,y1:s,x2:e,y2:t,c:i}),[f,h,g,v]=To({sourceX:e,sourceY:t,targetX:o,targetY:s,sourceControlX:a,sourceControlY:c,targetControlX:d,targetControlY:l});return[`M${e},${t} C${a},${c} ${d},${l} ${o},${s}`,f,h,g,v]}const Ct=y.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:s=U.Bottom,targetPosition:r=U.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:v,pathOptions:x,interactionWidth:E})=>{const[m,N,k]=zo({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:o,targetPosition:r,curvature:x?.curvature});return M.createElement(mt,{path:m,labelX:N,labelY:k,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:d,labelBgPadding:l,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:v,interactionWidth:E})});Ct.displayName="BezierEdge";const yn=y.createContext(null),xi=yn.Provider;yn.Consumer;const wi=()=>y.useContext(yn),bi=e=>"id"in e&&"source"in e&&"target"in e,Ei=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,sn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,Si=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),vi=(e,t)=>{if(!e.source||!e.target)return t;let n;return bi(e)?n={...e}:n={...e,id:Ei(e)},Si(n,t)?t:t.concat(n)},rn=({x:e,y:t},[n,o,s],r,[i,a])=>{const c={x:(e-n)/s,y:(t-o)/s};return r?{x:i*Math.round(c.x/i),y:a*Math.round(c.y/a)}:c},Io=({x:e,y:t},[n,o,s])=>({x:e*s+n,y:t*s+o}),Qe=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],s={x:e.position.x-n,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:s}},_t=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,s)=>{const{x:r,y:i}=Qe(s,t).positionAbsolute;return li(o,hn({x:r,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ui(n)},Ao=(e,t,[n,o,s]=[0,0,1],r=!1,i=!1,a=[0,0])=>{const c={x:(t.x-n)/s,y:(t.y-o)/s,width:t.width/s,height:t.height/s},d=[];return e.forEach(l=>{const{width:f,height:h,selectable:g=!0,hidden:v=!1}=l;if(i&&!g||v)return!1;const{positionAbsolute:x}=Qe(l,a),E={x:x.x,y:x.y,width:f||0,height:h||0},m=tn(c,E),N=typeof f>"u"||typeof h>"u"||f===null||h===null,k=r&&m>0,p=(f||0)*(h||0);(N||k||m>=p||l.dragging)&&d.push(l)}),d},Po=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},xn=(e,t,n,o,s,r=.1)=>{const i=t/(e.width*(1+r)),a=n/(e.height*(1+r)),c=Math.min(i,a),d=tt(c,o,s),l=e.x+e.width/2,f=e.y+e.height/2,h=t/2-l*d,g=n/2-f*d;return{x:h,y:g,zoom:d}},je=(e,t=0)=>e.transition().duration(t);function Vn(e,t,n,o){return(t[n]||[]).reduce((s,r)=>(`${e.id}-${r.id}-${n}`!==o&&s.push({id:r.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+r.x+r.width/2,y:(e.positionAbsolute?.y??0)+r.y+r.height/2}),s),[])}function Ni(e,t,n,o,s,r){const{x:i,y:a}=Re(e),d=t.elementsFromPoint(i,a).find(v=>v.classList.contains("react-flow__handle"));if(d){const v=d.getAttribute("data-nodeid");if(v){const x=wn(void 0,d),E=d.getAttribute("data-handleid"),m=r({nodeId:v,id:E,type:x});if(m){const N=s.find(k=>k.nodeId===v&&k.type===x&&k.id===E);return{handle:{id:E,type:x,nodeId:v,x:N?.x||n.x,y:N?.y||n.y},validHandleResult:m}}}}let l=[],f=1/0;if(s.forEach(v=>{const x=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(x<=o){const E=r(v);x<=f&&(x<f?l=[{handle:v,validHandleResult:E}]:x===f&&l.push({handle:v,validHandleResult:E}),f=x)}}),!l.length)return{handle:null,validHandleResult:Do()};if(l.length===1)return l[0];const h=l.some(({validHandleResult:v})=>v.isValid),g=l.some(({handle:v})=>v.type==="target");return l.find(({handle:v,validHandleResult:x})=>g?v.type==="target":h?x.isValid:!0)||l[0]}const Ci={source:null,target:null,sourceHandle:null,targetHandle:null},Do=()=>({handleDomNode:null,isValid:!1,connection:Ci,endHandle:null});function jo(e,t,n,o,s,r,i){const a=s==="target",c=i.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),d={...Do(),handleDomNode:c};if(c){const l=wn(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),g=c.classList.contains("connectable"),v=c.classList.contains("connectableend"),x={source:a?f:n,sourceHandle:a?h:o,target:a?n:f,targetHandle:a?o:h};d.connection=x,g&&v&&(t===Oe.Strict?a&&l==="source"||!a&&l==="target":f!==n||h!==o)&&(d.endHandle={nodeId:f,handleId:h,type:l},d.isValid=r(x))}return d}function Mi({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((s,r)=>{if(r[te]){const{handleBounds:i}=r[te];let a=[],c=[];i&&(a=Vn(r,i,"source",`${t}-${n}-${o}`),c=Vn(r,i,"target",`${t}-${n}-${o}`)),s.push(...a,...c)}return s},[])}function wn(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Ft(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ki(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Ho({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:s,getState:r,setState:i,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:d}){const l=Mo(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:g,connectionRadius:v,onConnectStart:x,panBy:E,getNodes:m,cancelConnection:N}=r();let k=0,p;const{x:$,y:T}=Re(e),j=l?.elementFromPoint($,T),z=wn(c,j),I=h?.getBoundingClientRect();if(!I||!z)return;let O,V=Re(e,I),L=!1,H=null,u=!1,C=null;const w=Mi({nodes:m(),nodeId:n,handleId:t,handleType:z}),R=()=>{if(!g)return;const[_,A]=Co(V,I);E({x:_,y:A}),k=requestAnimationFrame(R)};i({connectionPosition:V,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:z,connectionStartHandle:{nodeId:n,handleId:t,type:z},connectionEndHandle:null}),x?.(e,{nodeId:n,handleId:t,handleType:z});function P(_){const{transform:A}=r();V=Re(_,I);const{handle:D,validHandleResult:B}=Ni(_,l,rn(V,A,!1,[1,1]),v,w,F=>jo(F,f,n,t,s?"target":"source",a,l));if(p=D,L||(R(),L=!0),C=B.handleDomNode,H=B.connection,u=B.isValid,i({connectionPosition:p&&u?Io({x:p.x,y:p.y},A):V,connectionStatus:ki(!!p,u),connectionEndHandle:B.endHandle}),!p&&!u&&!C)return Ft(O);H.source!==H.target&&C&&(Ft(O),O=C,C.classList.add("connecting","react-flow__handle-connecting"),C.classList.toggle("valid",u),C.classList.toggle("react-flow__handle-valid",u))}function b(_){(p||C)&&H&&u&&o?.(H),r().onConnectEnd?.(_),c&&d?.(_),Ft(O),N(),cancelAnimationFrame(k),L=!1,u=!1,H=null,C=null,l.removeEventListener("mousemove",P),l.removeEventListener("mouseup",b),l.removeEventListener("touchmove",P),l.removeEventListener("touchend",b)}l.addEventListener("mousemove",P),l.addEventListener("mouseup",b),l.addEventListener("touchmove",P),l.addEventListener("touchend",b)}const Ln=()=>!0,$i=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Ri=(e,t,n)=>o=>{const{connectionStartHandle:s,connectionEndHandle:r,connectionClickStartHandle:i}=o;return{connecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n||r?.nodeId===e&&r?.handleId===t&&r?.type===n,clickConnecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n}},Oo=y.forwardRef(({type:e="source",position:t=U.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:r=!0,id:i,onConnect:a,children:c,className:d,onMouseDown:l,onTouchStart:f,...h},g)=>{const v=i||null,x=e==="target",E=oe(),m=wi(),{connectOnClick:N,noPanClassName:k}=J($i,ce),{connecting:p,clickConnecting:$}=J(Ri(m,v,e),ce);m||E.getState().onError?.("010",Ce.error010());const T=I=>{const{defaultEdgeOptions:O,onConnect:V,hasDefaultEdges:L}=E.getState(),H={...O,...I};if(L){const{edges:u,setEdges:C}=E.getState();C(vi(H,u))}V?.(H),a?.(H)},j=I=>{if(!m)return;const O=$o(I);s&&(O&&I.button===0||!O)&&Ho({event:I,handleId:v,nodeId:m,onConnect:T,isTarget:x,getState:E.getState,setState:E.setState,isValidConnection:n||E.getState().isValidConnection||Ln}),O?l?.(I):f?.(I)},z=I=>{const{onClickConnectStart:O,onClickConnectEnd:V,connectionClickStartHandle:L,connectionMode:H,isValidConnection:u}=E.getState();if(!m||!L&&!s)return;if(!L){O?.(I,{nodeId:m,handleId:v,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:v}});return}const C=Mo(I.target),w=n||u||Ln,{connection:R,isValid:P}=jo({nodeId:m,id:v,type:e},H,L.nodeId,L.handleId||null,L.type,w,C);P&&T(R),V?.(I),E.setState({connectionClickStartHandle:null})};return M.createElement("div",{"data-handleid":v,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${v}-${e}`,className:ie(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,d,{source:!x,target:x,connectable:o,connectablestart:s,connectableend:r,connecting:$,connectionindicator:o&&(s&&!p||r&&p)}]),onMouseDown:j,onTouchStart:j,onClick:N?z:void 0,ref:g,...h},c)});Oo.displayName="Handle";var re=y.memo(Oo);const Vo=({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:o=U.Bottom})=>M.createElement(M.Fragment,null,M.createElement(re,{type:"target",position:n,isConnectable:t}),e?.label,M.createElement(re,{type:"source",position:o,isConnectable:t}));Vo.displayName="DefaultNode";var an=y.memo(Vo);const Lo=({data:e,isConnectable:t,sourcePosition:n=U.Bottom})=>M.createElement(M.Fragment,null,e?.label,M.createElement(re,{type:"source",position:n,isConnectable:t}));Lo.displayName="InputNode";var Fo=y.memo(Lo);const Bo=({data:e,isConnectable:t,targetPosition:n=U.Top})=>M.createElement(M.Fragment,null,M.createElement(re,{type:"target",position:n,isConnectable:t}),e?.label);Bo.displayName="OutputNode";var Uo=y.memo(Bo);const bn=()=>null;bn.displayName="GroupNode";const Ti=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),wt=e=>e.id;function _i(e,t){return ce(e.selectedNodes.map(wt),t.selectedNodes.map(wt))&&ce(e.selectedEdges.map(wt),t.selectedEdges.map(wt))}const Zo=y.memo(({onSelectionChange:e})=>{const t=oe(),{selectedNodes:n,selectedEdges:o}=J(Ti,_i);return y.useEffect(()=>{const s={nodes:n,edges:o};e?.(s),t.getState().onSelectionChange.forEach(r=>r(s))},[n,o,e]),null});Zo.displayName="SelectionListener";const zi=e=>!!e.onSelectionChange;function Ii({onSelectionChange:e}){const t=J(zi);return e||t?M.createElement(Zo,{onSelectionChange:e}):null}const Ai=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function We(e,t){y.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Y(e,t,n){y.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Pi=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:s,onConnectStart:r,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:d,nodesConnectable:l,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:g,elevateNodesOnSelect:v,minZoom:x,maxZoom:E,nodeExtent:m,onNodesChange:N,onEdgesChange:k,elementsSelectable:p,connectionMode:$,snapGrid:T,snapToGrid:j,translateExtent:z,connectOnClick:I,defaultEdgeOptions:O,fitView:V,fitViewOptions:L,onNodesDelete:H,onEdgesDelete:u,onNodeDrag:C,onNodeDragStart:w,onNodeDragStop:R,onSelectionDrag:P,onSelectionDragStart:b,onSelectionDragStop:_,noPanClassName:A,nodeOrigin:D,rfId:B,autoPanOnConnect:F,autoPanOnNodeDrag:W,onError:X,connectionRadius:G,isValidConnection:K,nodeDragThreshold:ee})=>{const{setNodes:q,setEdges:me,setDefaultNodesAndEdges:de,setMinZoom:ge,setMaxZoom:fe,setTranslateExtent:ne,setNodeExtent:xe,reset:Q}=J(Ai,ce),Z=oe();return y.useEffect(()=>{const le=o?.map(Te=>({...Te,...O}));return de(n,le),()=>{Q()}},[]),Y("defaultEdgeOptions",O,Z.setState),Y("connectionMode",$,Z.setState),Y("onConnect",s,Z.setState),Y("onConnectStart",r,Z.setState),Y("onConnectEnd",i,Z.setState),Y("onClickConnectStart",a,Z.setState),Y("onClickConnectEnd",c,Z.setState),Y("nodesDraggable",d,Z.setState),Y("nodesConnectable",l,Z.setState),Y("nodesFocusable",f,Z.setState),Y("edgesFocusable",h,Z.setState),Y("edgesUpdatable",g,Z.setState),Y("elementsSelectable",p,Z.setState),Y("elevateNodesOnSelect",v,Z.setState),Y("snapToGrid",j,Z.setState),Y("snapGrid",T,Z.setState),Y("onNodesChange",N,Z.setState),Y("onEdgesChange",k,Z.setState),Y("connectOnClick",I,Z.setState),Y("fitViewOnInit",V,Z.setState),Y("fitViewOnInitOptions",L,Z.setState),Y("onNodesDelete",H,Z.setState),Y("onEdgesDelete",u,Z.setState),Y("onNodeDrag",C,Z.setState),Y("onNodeDragStart",w,Z.setState),Y("onNodeDragStop",R,Z.setState),Y("onSelectionDrag",P,Z.setState),Y("onSelectionDragStart",b,Z.setState),Y("onSelectionDragStop",_,Z.setState),Y("noPanClassName",A,Z.setState),Y("nodeOrigin",D,Z.setState),Y("rfId",B,Z.setState),Y("autoPanOnConnect",F,Z.setState),Y("autoPanOnNodeDrag",W,Z.setState),Y("onError",X,Z.setState),Y("connectionRadius",G,Z.setState),Y("isValidConnection",K,Z.setState),Y("nodeDragThreshold",ee,Z.setState),We(e,q),We(t,me),We(x,ge),We(E,fe),We(z,ne),We(m,xe),null},Fn={display:"none"},Di={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Wo="react-flow__node-desc",Yo="react-flow__edge-desc",ji="react-flow__aria-live",Hi=e=>e.ariaLiveMessage;function Oi({rfId:e}){const t=J(Hi);return M.createElement("div",{id:`${ji}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Di},t)}function Vi({rfId:e,disableKeyboardA11y:t}){return M.createElement(M.Fragment,null,M.createElement("div",{id:`${Wo}-${e}`,style:Fn},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),M.createElement("div",{id:`${Yo}-${e}`,style:Fn},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&M.createElement(Oi,{rfId:e}))}var ht=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=y.useState(!1),s=y.useRef(!1),r=y.useRef(new Set([])),[i,a]=y.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),l=d.reduce((f,h)=>f.concat(...h),[]);return[d,l]}return[[],[]]},[e]);return y.useEffect(()=>{const c=typeof document<"u"?document:null,d=t?.target||c;if(e!==null){const l=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&nn(g))return!1;const x=Un(g.code,a);r.current.add(g[x]),Bn(i,r.current,!1)&&(g.preventDefault(),o(!0))},f=g=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&nn(g))return!1;const x=Un(g.code,a);Bn(i,r.current,!0)?(o(!1),r.current.clear()):r.current.delete(g[x]),g.key==="Meta"&&r.current.clear(),s.current=!1},h=()=>{r.current.clear(),o(!1)};return d?.addEventListener("keydown",l),d?.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{d?.removeEventListener("keydown",l),d?.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,o]),n};function Bn(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(s=>t.has(s)))}function Un(e,t){return t.includes(e)?"code":"key"}function Xo(e,t,n,o){const s=e.parentNode||e.parentId;if(!s)return n;const r=t.get(s),i=Qe(r,o);return Xo(r,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(r[te]?.z??0)>(n.z??0)?r[te]?.z??0:n.z??0},o)}function Go(e,t,n){e.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[o.id]){const{x:r,y:i,z:a}=Xo(o,e,{...o.position,z:o[te]?.z??0},t);o.positionAbsolute={x:r,y:i},o[te].z=a,n?.[o.id]&&(o[te].isParent=!0)}})}function Bt(e,t,n,o){const s=new Map,r={},i=o?1e3:0;return e.forEach(a=>{const c=(he(a.zIndex)?a.zIndex:0)+(a.selected?i:0),d=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(r[f]=!0);const h=d?.type&&d?.type!==a.type;Object.defineProperty(l,te,{enumerable:!1,value:{handleBounds:h?void 0:d?.[te]?.handleBounds,z:c}}),s.set(a.id,l)}),Go(s,n,r),s}function Ko(e,t={}){const{getNodes:n,width:o,height:s,minZoom:r,maxZoom:i,d3Zoom:a,d3Selection:c,fitViewOnInitDone:d,fitViewOnInit:l,nodeOrigin:f}=e(),h=t.initial&&!d&&l;if(a&&c&&(h||!t.initial)){const v=n().filter(E=>{const m=t.includeHiddenNodes?E.width&&E.height:!E.hidden;return t.nodes?.length?m&&t.nodes.some(N=>N.id===E.id):m}),x=v.every(E=>E.width&&E.height);if(v.length>0&&x){const E=_t(v,f),{x:m,y:N,zoom:k}=xn(E,o,s,t.minZoom??r,t.maxZoom??i,t.padding??.1),p=$e.translate(m,N).scale(k);return typeof t.duration=="number"&&t.duration>0?a.transform(je(c,t.duration),p):a.transform(c,p),!0}}return!1}function Li(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[te]:o[te],selected:n.selected})}),new Map(t)}function Fi(e,t){return t.map(n=>{const o=e.find(s=>s.id===n.id);return o&&(n.selected=o.selected),n})}function bt({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:s,edges:r,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:d}=n();e?.length&&(c&&o({nodeInternals:Li(e,s)}),i?.(e)),t?.length&&(d&&o({edges:Fi(t,r)}),a?.(t))}const Ye=()=>{},Bi={zoomIn:Ye,zoomOut:Ye,zoomTo:Ye,getZoom:()=>1,setViewport:Ye,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ye,fitBounds:Ye,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Ui=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Zi=()=>{const e=oe(),{d3Zoom:t,d3Selection:n}=J(Ui,ce);return y.useMemo(()=>n&&t?{zoomIn:s=>t.scaleBy(je(n,s?.duration),1.2),zoomOut:s=>t.scaleBy(je(n,s?.duration),1/1.2),zoomTo:(s,r)=>t.scaleTo(je(n,r?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,r)=>{const[i,a,c]=e.getState().transform,d=$e.translate(s.x??i,s.y??a).scale(s.zoom??c);t.transform(je(n,r?.duration),d)},getViewport:()=>{const[s,r,i]=e.getState().transform;return{x:s,y:r,zoom:i}},fitView:s=>Ko(e.getState,s),setCenter:(s,r,i)=>{const{width:a,height:c,maxZoom:d}=e.getState(),l=typeof i?.zoom<"u"?i.zoom:d,f=a/2-s*l,h=c/2-r*l,g=$e.translate(f,h).scale(l);t.transform(je(n,i?.duration),g)},fitBounds:(s,r)=>{const{width:i,height:a,minZoom:c,maxZoom:d}=e.getState(),{x:l,y:f,zoom:h}=xn(s,i,a,c,d,r?.padding??.1),g=$e.translate(l,f).scale(h);t.transform(je(n,r?.duration),g)},project:s=>{const{transform:r,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),rn(s,r,i,a)},screenToFlowPosition:s=>{const{transform:r,snapToGrid:i,snapGrid:a,domNode:c}=e.getState();if(!c)return s;const{x:d,y:l}=c.getBoundingClientRect(),f={x:s.x-d,y:s.y-l};return rn(f,r,i,a)},flowToScreenPosition:s=>{const{transform:r,domNode:i}=e.getState();if(!i)return s;const{x:a,y:c}=i.getBoundingClientRect(),d=Io(s,r);return{x:d.x+a,y:d.y+c}},viewportInitialized:!0}:Bi,[t,n])};function gt(){const e=Zi(),t=oe(),n=y.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),o=y.useCallback(x=>t.getState().nodeInternals.get(x),[]),s=y.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(E=>({...E}))},[]),r=y.useCallback(x=>{const{edges:E=[]}=t.getState();return E.find(m=>m.id===x)},[]),i=y.useCallback(x=>{const{getNodes:E,setNodes:m,hasDefaultNodes:N,onNodesChange:k}=t.getState(),p=E(),$=typeof x=="function"?x(p):x;if(N)m($);else if(k){const T=$.length===0?p.map(j=>({type:"remove",id:j.id})):$.map(j=>({item:j,type:"reset"}));k(T)}},[]),a=y.useCallback(x=>{const{edges:E=[],setEdges:m,hasDefaultEdges:N,onEdgesChange:k}=t.getState(),p=typeof x=="function"?x(E):x;if(N)m(p);else if(k){const $=p.length===0?E.map(T=>({type:"remove",id:T.id})):p.map(T=>({item:T,type:"reset"}));k($)}},[]),c=y.useCallback(x=>{const E=Array.isArray(x)?x:[x],{getNodes:m,setNodes:N,hasDefaultNodes:k,onNodesChange:p}=t.getState();if(k){const T=[...m(),...E];N(T)}else if(p){const $=E.map(T=>({item:T,type:"add"}));p($)}},[]),d=y.useCallback(x=>{const E=Array.isArray(x)?x:[x],{edges:m=[],setEdges:N,hasDefaultEdges:k,onEdgesChange:p}=t.getState();if(k)N([...m,...E]);else if(p){const $=E.map(T=>({item:T,type:"add"}));p($)}},[]),l=y.useCallback(()=>{const{getNodes:x,edges:E=[],transform:m}=t.getState(),[N,k,p]=m;return{nodes:x().map($=>({...$})),edges:E.map($=>({...$})),viewport:{x:N,y:k,zoom:p}}},[]),f=y.useCallback(({nodes:x,edges:E})=>{const{nodeInternals:m,getNodes:N,edges:k,hasDefaultNodes:p,hasDefaultEdges:$,onNodesDelete:T,onEdgesDelete:j,onNodesChange:z,onEdgesChange:I}=t.getState(),O=(x||[]).map(C=>C.id),V=(E||[]).map(C=>C.id),L=N().reduce((C,w)=>{const R=w.parentNode||w.parentId,P=!O.includes(w.id)&&R&&C.find(_=>_.id===R);return(typeof w.deletable=="boolean"?w.deletable:!0)&&(O.includes(w.id)||P)&&C.push(w),C},[]),H=k.filter(C=>typeof C.deletable=="boolean"?C.deletable:!0),u=H.filter(C=>V.includes(C.id));if(L||u){const C=Po(L,H),w=[...u,...C],R=w.reduce((P,b)=>(P.includes(b.id)||P.push(b.id),P),[]);if(($||p)&&($&&t.setState({edges:k.filter(P=>!R.includes(P.id))}),p&&(L.forEach(P=>{m.delete(P.id)}),t.setState({nodeInternals:new Map(m)}))),R.length>0&&(j?.(w),I&&I(R.map(P=>({id:P,type:"remove"})))),L.length>0&&(T?.(L),z)){const P=L.map(b=>({id:b.id,type:"remove"}));z(P)}}},[]),h=y.useCallback(x=>{const E=di(x),m=E?null:t.getState().nodeInternals.get(x.id);return!E&&!m?[null,null,E]:[E?x:Pn(m),m,E]},[]),g=y.useCallback((x,E=!0,m)=>{const[N,k,p]=h(x);return N?(m||t.getState().getNodes()).filter($=>{if(!p&&($.id===k.id||!$.positionAbsolute))return!1;const T=Pn($),j=tn(T,N);return E&&j>0||j>=N.width*N.height}):[]},[]),v=y.useCallback((x,E,m=!0)=>{const[N]=h(x);if(!N)return!1;const k=tn(N,E);return m&&k>0||k>=N.width*N.height},[]);return y.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:s,getEdge:r,setNodes:i,setEdges:a,addNodes:c,addEdges:d,toObject:l,deleteElements:f,getIntersectingNodes:g,isNodeIntersecting:v}),[e,n,o,s,r,i,a,c,d,l,f,g,v])}const Wi={actInsideInputWithModifier:!1};var Yi=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=oe(),{deleteElements:o}=gt(),s=ht(e,Wi),r=ht(t);y.useEffect(()=>{if(s){const{edges:i,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),d=i.filter(l=>l.selected);o({nodes:c,edges:d}),n.setState({nodesSelectionActive:!1})}},[s]),y.useEffect(()=>{n.setState({multiSelectionActive:r})},[r])};function Xi(e){const t=oe();y.useEffect(()=>{let n;const o=()=>{if(!e.current)return;const s=dn(e.current);(s.height===0||s.width===0)&&t.getState().onError?.("004",Ce.error004()),t.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const En={position:"absolute",width:"100%",height:"100%",top:0,left:0},Gi=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Et=e=>({x:e.x,y:e.y,zoom:e.k}),Xe=(e,t)=>e.target.closest(`.${t}`),Zn=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Wn=e=>{const t=e.ctrlKey&&vt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Ki=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),qi=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:r=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=He.Free,zoomOnDoubleClick:d=!0,elementsSelectable:l,panOnDrag:f=!0,defaultViewport:h,translateExtent:g,minZoom:v,maxZoom:x,zoomActivationKeyCode:E,preventScrolling:m=!0,children:N,noWheelClassName:k,noPanClassName:p})=>{const $=y.useRef(),T=oe(),j=y.useRef(!1),z=y.useRef(!1),I=y.useRef(null),O=y.useRef({x:0,y:0,zoom:0}),{d3Zoom:V,d3Selection:L,d3ZoomHandler:H,userSelectionActive:u}=J(Ki,ce),C=ht(E),w=y.useRef(0),R=y.useRef(!1),P=y.useRef();return Xi(I),y.useEffect(()=>{if(I.current){const b=I.current.getBoundingClientRect(),_=oi().scaleExtent([v,x]).translateExtent(g),A=pe(I.current).call(_),D=$e.translate(h.x,h.y).scale(tt(h.zoom,v,x)),B=[[0,0],[b.width,b.height]],F=_.constrain()(D,B,g);_.transform(A,F),_.wheelDelta(Wn),T.setState({d3Zoom:_,d3Selection:A,d3ZoomHandler:A.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:I.current.closest(".react-flow")})}},[]),y.useEffect(()=>{L&&V&&(i&&!C&&!u?L.on("wheel.zoom",b=>{if(Xe(b,k))return!1;b.preventDefault(),b.stopImmediatePropagation();const _=L.property("__zoom").k||1;if(b.ctrlKey&&r){const K=Ee(b),ee=Wn(b),q=_*Math.pow(2,ee);V.scaleTo(L,q,K,b);return}const A=b.deltaMode===1?20:1;let D=c===He.Vertical?0:b.deltaX*A,B=c===He.Horizontal?0:b.deltaY*A;!vt()&&b.shiftKey&&c!==He.Vertical&&(D=b.deltaY*A,B=0),V.translateBy(L,-(D/_)*a,-(B/_)*a,{internal:!0});const F=Et(L.property("__zoom")),{onViewportChangeStart:W,onViewportChange:X,onViewportChangeEnd:G}=T.getState();clearTimeout(P.current),R.current||(R.current=!0,t?.(b,F),W?.(F)),R.current&&(e?.(b,F),X?.(F),P.current=setTimeout(()=>{n?.(b,F),G?.(F),R.current=!1},150))},{passive:!1}):typeof H<"u"&&L.on("wheel.zoom",function(b,_){if(!m&&b.type==="wheel"&&!b.ctrlKey||Xe(b,k))return null;b.preventDefault(),H.call(this,b,_)},{passive:!1}))},[u,i,c,L,V,H,C,r,m,k,t,e,n]),y.useEffect(()=>{V&&V.on("start",b=>{if(!b.sourceEvent||b.sourceEvent.internal)return null;w.current=b.sourceEvent?.button;const{onViewportChangeStart:_}=T.getState(),A=Et(b.transform);j.current=!0,O.current=A,b.sourceEvent?.type==="mousedown"&&T.setState({paneDragging:!0}),_?.(A),t?.(b.sourceEvent,A)})},[V,t]),y.useEffect(()=>{V&&(u&&!j.current?V.on("zoom",null):u||V.on("zoom",b=>{const{onViewportChange:_}=T.getState();if(T.setState({transform:[b.transform.x,b.transform.y,b.transform.k]}),z.current=!!(o&&Zn(f,w.current??0)),(e||_)&&!b.sourceEvent?.internal){const A=Et(b.transform);_?.(A),e?.(b.sourceEvent,A)}}))},[u,V,e,f,o]),y.useEffect(()=>{V&&V.on("end",b=>{if(!b.sourceEvent||b.sourceEvent.internal)return null;const{onViewportChangeEnd:_}=T.getState();if(j.current=!1,T.setState({paneDragging:!1}),o&&Zn(f,w.current??0)&&!z.current&&o(b.sourceEvent),z.current=!1,(n||_)&&Gi(O.current,b.transform)){const A=Et(b.transform);O.current=A,clearTimeout($.current),$.current=setTimeout(()=>{_?.(A),n?.(b.sourceEvent,A)},i?150:0)}})},[V,i,f,n,o]),y.useEffect(()=>{V&&V.filter(b=>{const _=C||s,A=r&&b.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&b.button===1&&b.type==="mousedown"&&(Xe(b,"react-flow__node")||Xe(b,"react-flow__edge")))return!0;if(!f&&!_&&!i&&!d&&!r||u||!d&&b.type==="dblclick"||Xe(b,k)&&b.type==="wheel"||Xe(b,p)&&(b.type!=="wheel"||i&&b.type==="wheel"&&!C)||!r&&b.ctrlKey&&b.type==="wheel"||!_&&!i&&!A&&b.type==="wheel"||!f&&(b.type==="mousedown"||b.type==="touchstart")||Array.isArray(f)&&!f.includes(b.button)&&b.type==="mousedown")return!1;const D=Array.isArray(f)&&f.includes(b.button)||!b.button||b.button<=1;return(!b.ctrlKey||b.type==="wheel")&&D})},[u,V,s,r,i,d,f,l,C]),M.createElement("div",{className:"react-flow__renderer",ref:I,style:En},N)},Qi=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ji(){const{userSelectionActive:e,userSelectionRect:t}=J(Qi,ce);return e&&t?M.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Yn(e,t){const n=t.parentNode||t.parentId,o=e.find(s=>s.id===n);if(o){const s=t.position.x+t.width-o.width,r=t.position.y+t.height-o.height;if(s>0||r>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),r>0&&(o.style.height+=r),t.position.x<0){const i=Math.abs(t.position.x);o.position.x=o.position.x-i,o.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);o.position.y=o.position.y-i,o.style.height+=i,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function qo(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,s)=>{const r=e.filter(a=>a.id===s.id);if(r.length===0)return o.push(s),o;const i={...s};for(const a of r)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&Yn(o,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&Yn(o,i);break}case"remove":return o}return o.push(i),o},n)}function Qo(e,t){return qo(e,t)}function ea(e,t){return qo(e,t)}const ke=(e,t)=>({id:e,type:"select",selected:t});function Ke(e,t){return e.reduce((n,o)=>{const s=t.includes(o.id);return!o.selected&&s?(o.selected=!0,n.push(ke(o.id,!0))):o.selected&&!s&&(o.selected=!1,n.push(ke(o.id,!1))),n},[])}const Ut=(e,t)=>n=>{n.target===t.current&&e?.(n)},ta=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Jo=y.memo(({isSelecting:e,selectionMode:t=ft.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:s,onPaneClick:r,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:l,children:f})=>{const h=y.useRef(null),g=oe(),v=y.useRef(0),x=y.useRef(0),E=y.useRef(),{userSelectionActive:m,elementsSelectable:N,dragging:k}=J(ta,ce),p=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,x.current=0},$=H=>{r?.(H),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},T=H=>{if(Array.isArray(n)&&n?.includes(2)){H.preventDefault();return}i?.(H)},j=a?H=>a(H):void 0,z=H=>{const{resetSelectedElements:u,domNode:C}=g.getState();if(E.current=C?.getBoundingClientRect(),!N||!e||H.button!==0||H.target!==h.current||!E.current)return;const{x:w,y:R}=Re(H,E.current);u(),g.setState({userSelectionRect:{width:0,height:0,startX:w,startY:R,x:w,y:R}}),o?.(H)},I=H=>{const{userSelectionRect:u,nodeInternals:C,edges:w,transform:R,onNodesChange:P,onEdgesChange:b,nodeOrigin:_,getNodes:A}=g.getState();if(!e||!E.current||!u)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const D=Re(H,E.current),B=u.startX??0,F=u.startY??0,W={...u,x:D.x<B?D.x:B,y:D.y<F?D.y:F,width:Math.abs(D.x-B),height:Math.abs(D.y-F)},X=A(),G=Ao(C,W,R,t===ft.Partial,!0,_),K=Po(G,w).map(q=>q.id),ee=G.map(q=>q.id);if(v.current!==ee.length){v.current=ee.length;const q=Ke(X,ee);q.length&&P?.(q)}if(x.current!==K.length){x.current=K.length;const q=Ke(w,K);q.length&&b?.(q)}g.setState({userSelectionRect:W})},O=H=>{if(H.button!==0)return;const{userSelectionRect:u}=g.getState();!m&&u&&H.target===h.current&&$?.(H),g.setState({nodesSelectionActive:v.current>0}),p(),s?.(H)},V=H=>{m&&(g.setState({nodesSelectionActive:v.current>0}),s?.(H)),p()},L=N&&(e||m);return M.createElement("div",{className:ie(["react-flow__pane",{dragging:k,selection:e}]),onClick:L?void 0:Ut($,h),onContextMenu:Ut(T,h),onWheel:Ut(j,h),onMouseEnter:L?void 0:c,onMouseDown:L?z:void 0,onMouseMove:L?I:d,onMouseUp:L?O:void 0,onMouseLeave:L?V:l,ref:h,style:En},f,M.createElement(Ji,null))});Jo.displayName="Pane";function es(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return o?o.selected?!0:es(o,t):!1}function Xn(e,t,n){let o=e;do{if(o?.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function na(e,t,n,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!es(s,e))&&(s.draggable||t&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function oa(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function ts(e,t,n,o,s=[0,0],r){const i=oa(e,e.extent||o);let a=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:h,y:g}=Qe(f,s).positionAbsolute;a=f&&he(h)&&he(g)&&he(f.width)&&he(f.height)?[[h+e.width*s[0],g+e.height*s[1]],[h+f.width-e.width+e.width*s[0],g+f.height-e.height+e.height*s[1]]]:a}else r?.("005",Ce.error005()),a=i;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:h,y:g}=Qe(f,s).positionAbsolute;a=[[e.extent[0][0]+h,e.extent[0][1]+g],[e.extent[1][0]+h,e.extent[1][1]+g]]}let d={x:0,y:0};if(c){const f=n.get(c);d=Qe(f,s).positionAbsolute}const l=a&&a!=="parent"?fn(t,a):t;return{position:{x:l.x-d.x,y:l.y-d.y},positionAbsolute:l}}function Zt({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const Gn=(e,t,n,o)=>{const s=t.querySelectorAll(e);if(!s||!s.length)return null;const r=Array.from(s),i=t.getBoundingClientRect(),a={x:i.width*o[0],y:i.height*o[1]};return r.map(c=>{const d=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(d.left-i.left-a.x)/n,y:(d.top-i.top-a.y)/n,...dn(c)}})};function at(e,t,n){return n===void 0?n:o=>{const s=t().nodeInternals.get(e);s&&n(o,{...s})}}function cn({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:r,multiSelectionActive:i,nodeInternals:a,onError:c}=t.getState(),d=a.get(e);if(!d){c?.("012",Ce.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&i)&&(r({nodes:[d],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function sa(){const e=oe();return y.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:s,snapToGrid:r}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:r?s[0]*Math.round(c.x/s[0]):c.x,ySnapped:r?s[1]*Math.round(c.y/s[1]):c.y,...c}},[])}function Wt(e){return(t,n,o)=>e?.(t,o)}function ns({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:s,isSelectable:r,selectNodesOnDrag:i}){const a=oe(),[c,d]=y.useState(!1),l=y.useRef([]),f=y.useRef({x:null,y:null}),h=y.useRef(0),g=y.useRef(null),v=y.useRef({x:0,y:0}),x=y.useRef(null),E=y.useRef(!1),m=y.useRef(!1),N=y.useRef(!1),k=sa();return y.useEffect(()=>{if(e?.current){const p=pe(e.current),$=({x:z,y:I})=>{const{nodeInternals:O,onNodeDrag:V,onSelectionDrag:L,updateNodePositions:H,nodeExtent:u,snapGrid:C,snapToGrid:w,nodeOrigin:R,onError:P}=a.getState();f.current={x:z,y:I};let b=!1,_={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&u){const D=_t(l.current,R);_=hn(D)}if(l.current=l.current.map(D=>{const B={x:z-D.distance.x,y:I-D.distance.y};w&&(B.x=C[0]*Math.round(B.x/C[0]),B.y=C[1]*Math.round(B.y/C[1]));const F=[[u[0][0],u[0][1]],[u[1][0],u[1][1]]];l.current.length>1&&u&&!D.extent&&(F[0][0]=D.positionAbsolute.x-_.x+u[0][0],F[1][0]=D.positionAbsolute.x+(D.width??0)-_.x2+u[1][0],F[0][1]=D.positionAbsolute.y-_.y+u[0][1],F[1][1]=D.positionAbsolute.y+(D.height??0)-_.y2+u[1][1]);const W=ts(D,B,O,F,R,P);return b=b||D.position.x!==W.position.x||D.position.y!==W.position.y,D.position=W.position,D.positionAbsolute=W.positionAbsolute,D}),!b)return;H(l.current,!0,!0),d(!0);const A=s?V:Wt(L);if(A&&x.current){const[D,B]=Zt({nodeId:s,dragItems:l.current,nodeInternals:O});A(x.current,D,B)}},T=()=>{if(!g.current)return;const[z,I]=Co(v.current,g.current);if(z!==0||I!==0){const{transform:O,panBy:V}=a.getState();f.current.x=(f.current.x??0)-z/O[2],f.current.y=(f.current.y??0)-I/O[2],V({x:z,y:I})&&$(f.current)}h.current=requestAnimationFrame(T)},j=z=>{const{nodeInternals:I,multiSelectionActive:O,nodesDraggable:V,unselectNodesAndEdges:L,onNodeDragStart:H,onSelectionDragStart:u}=a.getState();m.current=!0;const C=s?H:Wt(u);(!i||!r)&&!O&&s&&(I.get(s)?.selected||L()),s&&r&&i&&cn({id:s,store:a,nodeRef:e});const w=k(z);if(f.current=w,l.current=na(I,V,w,s),C&&l.current){const[R,P]=Zt({nodeId:s,dragItems:l.current,nodeInternals:I});C(z.sourceEvent,R,P)}};if(t)p.on(".drag",null);else{const z=Wr().on("start",I=>{const{domNode:O,nodeDragThreshold:V}=a.getState();V===0&&j(I),N.current=!1;const L=k(I);f.current=L,g.current=O?.getBoundingClientRect()||null,v.current=Re(I.sourceEvent,g.current)}).on("drag",I=>{const O=k(I),{autoPanOnNodeDrag:V,nodeDragThreshold:L}=a.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(N.current=!0),!N.current){if(!E.current&&m.current&&V&&(E.current=!0,T()),!m.current){const H=O.xSnapped-(f?.current?.x??0),u=O.ySnapped-(f?.current?.y??0);Math.sqrt(H*H+u*u)>L&&j(I)}(f.current.x!==O.xSnapped||f.current.y!==O.ySnapped)&&l.current&&m.current&&(x.current=I.sourceEvent,v.current=Re(I.sourceEvent,g.current),$(O))}}).on("end",I=>{if(!(!m.current||N.current)&&(d(!1),E.current=!1,m.current=!1,cancelAnimationFrame(h.current),l.current)){const{updateNodePositions:O,nodeInternals:V,onNodeDragStop:L,onSelectionDragStop:H}=a.getState(),u=s?L:Wt(H);if(O(l.current,!1,!1),u){const[C,w]=Zt({nodeId:s,dragItems:l.current,nodeInternals:V});u(I.sourceEvent,C,w)}}}).filter(I=>{const O=I.target;return!I.button&&(!n||!Xn(O,`.${n}`,e))&&(!o||Xn(O,o,e))});return p.call(z),()=>{p.on(".drag",null)}}}},[e,t,n,o,r,a,s,i,k]),c}function os(){const e=oe();return y.useCallback(n=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:r,getNodes:i,snapToGrid:a,snapGrid:c,onError:d,nodesDraggable:l}=e.getState(),f=i().filter(N=>N.selected&&(N.draggable||l&&typeof N.draggable>"u")),h=a?c[0]:5,g=a?c[1]:5,v=n.isShiftPressed?4:1,x=n.x*h*v,E=n.y*g*v,m=f.map(N=>{if(N.positionAbsolute){const k={x:N.positionAbsolute.x+x,y:N.positionAbsolute.y+E};a&&(k.x=c[0]*Math.round(k.x/c[0]),k.y=c[1]*Math.round(k.y/c[1]));const{positionAbsolute:p,position:$}=ts(N,k,o,s,void 0,d);N.position=$,N.positionAbsolute=p}return N});r(m,!0,!1)},[])}const Je={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ct=e=>{const t=({id:n,type:o,data:s,xPos:r,yPos:i,xPosOrigin:a,yPosOrigin:c,selected:d,onClick:l,onMouseEnter:f,onMouseMove:h,onMouseLeave:g,onContextMenu:v,onDoubleClick:x,style:E,className:m,isDraggable:N,isSelectable:k,isConnectable:p,isFocusable:$,selectNodesOnDrag:T,sourcePosition:j,targetPosition:z,hidden:I,resizeObserver:O,dragHandle:V,zIndex:L,isParent:H,noDragClassName:u,noPanClassName:C,initialized:w,disableKeyboardA11y:R,ariaLabel:P,rfId:b,hasHandleBounds:_})=>{const A=oe(),D=y.useRef(null),B=y.useRef(null),F=y.useRef(j),W=y.useRef(z),X=y.useRef(o),G=k||N||l||f||h||g,K=os(),ee=at(n,A.getState,f),q=at(n,A.getState,h),me=at(n,A.getState,g),de=at(n,A.getState,v),ge=at(n,A.getState,x),fe=Q=>{const{nodeDragThreshold:Z}=A.getState();if(k&&(!T||!N||Z>0)&&cn({id:n,store:A,nodeRef:D}),l){const le=A.getState().nodeInternals.get(n);le&&l(Q,{...le})}},ne=Q=>{if(!nn(Q)&&!R)if(ko.includes(Q.key)&&k){const Z=Q.key==="Escape";cn({id:n,store:A,unselect:Z,nodeRef:D})}else N&&d&&Object.prototype.hasOwnProperty.call(Je,Q.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~r}, y: ${~~i}`}),K({x:Je[Q.key].x,y:Je[Q.key].y,isShiftPressed:Q.shiftKey}))};y.useEffect(()=>()=>{B.current&&(O?.unobserve(B.current),B.current=null)},[]),y.useEffect(()=>{if(D.current&&!I){const Q=D.current;(!w||!_||B.current!==Q)&&(B.current&&O?.unobserve(B.current),O?.observe(Q),B.current=Q)}},[I,w,_]),y.useEffect(()=>{const Q=X.current!==o,Z=F.current!==j,le=W.current!==z;D.current&&(Q||Z||le)&&(Q&&(X.current=o),Z&&(F.current=j),le&&(W.current=z),A.getState().updateNodeDimensions([{id:n,nodeElement:D.current,forceUpdate:!0}]))},[n,o,j,z]);const xe=ns({nodeRef:D,disabled:I||!N,noDragClassName:u,handleSelector:V,nodeId:n,isSelectable:k,selectNodesOnDrag:T});return I?null:M.createElement("div",{className:ie(["react-flow__node",`react-flow__node-${o}`,{[C]:N},m,{selected:d,selectable:k,parent:H,dragging:xe}]),ref:D,style:{zIndex:L,transform:`translate(${a}px,${c}px)`,pointerEvents:G?"all":"none",visibility:w?"visible":"hidden",...E},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:q,onMouseLeave:me,onContextMenu:de,onClick:fe,onDoubleClick:ge,onKeyDown:$?ne:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":R?void 0:`${Wo}-${b}`,"aria-label":P},M.createElement(xi,{value:n},M.createElement(e,{id:n,data:s,type:o,xPos:r,yPos:i,selected:d,isConnectable:p,sourcePosition:j,targetPosition:z,dragging:xe,dragHandle:V,zIndex:L})))};return t.displayName="NodeWrapper",y.memo(t)};const ra=e=>{const t=e.getNodes().filter(n=>n.selected);return{..._t(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function ia({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=oe(),{width:s,height:r,x:i,y:a,transformString:c,userSelectionActive:d}=J(ra,ce),l=os(),f=y.useRef(null);if(y.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),ns({nodeRef:f}),d||!s||!r)return null;const h=e?v=>{const x=o.getState().getNodes().filter(E=>E.selected);e(v,x)}:void 0,g=v=>{Object.prototype.hasOwnProperty.call(Je,v.key)&&l({x:Je[v.key].x,y:Je[v.key].y,isShiftPressed:v.shiftKey})};return M.createElement("div",{className:ie(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},M.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:s,height:r,top:a,left:i}}))}var aa=y.memo(ia);const ca=e=>e.nodesSelectionActive,ss=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:r,onPaneScroll:i,deleteKeyCode:a,onMove:c,onMoveStart:d,onMoveEnd:l,selectionKeyCode:f,selectionOnDrag:h,selectionMode:g,onSelectionStart:v,onSelectionEnd:x,multiSelectionKeyCode:E,panActivationKeyCode:m,zoomActivationKeyCode:N,elementsSelectable:k,zoomOnScroll:p,zoomOnPinch:$,panOnScroll:T,panOnScrollSpeed:j,panOnScrollMode:z,zoomOnDoubleClick:I,panOnDrag:O,defaultViewport:V,translateExtent:L,minZoom:H,maxZoom:u,preventScrolling:C,onSelectionContextMenu:w,noWheelClassName:R,noPanClassName:P,disableKeyboardA11y:b})=>{const _=J(ca),A=ht(f),D=ht(m),B=D||O,F=D||T,W=A||h&&B!==!0;return Yi({deleteKeyCode:a,multiSelectionKeyCode:E}),M.createElement(qi,{onMove:c,onMoveStart:d,onMoveEnd:l,onPaneContextMenu:r,elementsSelectable:k,zoomOnScroll:p,zoomOnPinch:$,panOnScroll:F,panOnScrollSpeed:j,panOnScrollMode:z,zoomOnDoubleClick:I,panOnDrag:!A&&B,defaultViewport:V,translateExtent:L,minZoom:H,maxZoom:u,zoomActivationKeyCode:N,preventScrolling:C,noWheelClassName:R,noPanClassName:P},M.createElement(Jo,{onSelectionStart:v,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:r,onPaneScroll:i,panOnDrag:B,isSelecting:!!W,selectionMode:g},e,_&&M.createElement(aa,{onSelectionContextMenu:w,noPanClassName:P,disableKeyboardA11y:b})))};ss.displayName="FlowRenderer";var la=y.memo(ss);function ua(e){return J(y.useCallback(n=>e?Ao(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function da(e){const t={input:ct(e.input||Fo),default:ct(e.default||an),output:ct(e.output||Uo),group:ct(e.group||bn)},n={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,r)=>(s[r]=ct(e[r]||an),s),n);return{...t,...o}}const fa=({x:e,y:t,width:n,height:o,origin:s})=>!n||!o?{x:e,y:t}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:t}:{x:e-n*s[0],y:t-o*s[1]},ha=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),rs=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:r,onError:i}=J(ha,ce),a=ua(e.onlyRenderVisibleElements),c=y.useRef(),d=y.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(f=>{const h=f.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));r(h)});return c.current=l,l},[]);return y.useEffect(()=>()=>{c?.current?.disconnect()},[]),M.createElement("div",{className:"react-flow__nodes",style:En},a.map(l=>{let f=l.type||"default";e.nodeTypes[f]||(i?.("003",Ce.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,g=!!(l.draggable||t&&typeof l.draggable>"u"),v=!!(l.selectable||s&&typeof l.selectable>"u"),x=!!(l.connectable||n&&typeof l.connectable>"u"),E=!!(l.focusable||o&&typeof l.focusable>"u"),m=e.nodeExtent?fn(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,N=m?.x??0,k=m?.y??0,p=fa({x:N,y:k,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return M.createElement(h,{key:l.id,id:l.id,className:l.className,style:l.style,type:f,data:l.data,sourcePosition:l.sourcePosition||U.Bottom,targetPosition:l.targetPosition||U.Top,hidden:l.hidden,xPos:N,yPos:k,xPosOrigin:p.x,yPosOrigin:p.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:g,isSelectable:v,isConnectable:x,isFocusable:E,resizeObserver:d,dragHandle:l.dragHandle,zIndex:l[te]?.z??0,isParent:!!l[te]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!l[te]?.handleBounds})}))};rs.displayName="NodeRenderer";var ma=y.memo(rs);const ga=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,pa=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,Kn="react-flow__edgeupdater",qn=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:s,onMouseEnter:r,onMouseOut:i,type:a})=>M.createElement("circle",{onMouseDown:s,onMouseEnter:r,onMouseOut:i,className:ie([Kn,`${Kn}-${a}`]),cx:ga(t,o,e),cy:pa(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),ya=()=>!0;var Ge=e=>{const t=({id:n,className:o,type:s,data:r,onClick:i,onEdgeDoubleClick:a,selected:c,animated:d,label:l,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:x,style:E,source:m,target:N,sourceX:k,sourceY:p,targetX:$,targetY:T,sourcePosition:j,targetPosition:z,elementsSelectable:I,hidden:O,sourceHandleId:V,targetHandleId:L,onContextMenu:H,onMouseEnter:u,onMouseMove:C,onMouseLeave:w,reconnectRadius:R,onReconnect:P,onReconnectStart:b,onReconnectEnd:_,markerEnd:A,markerStart:D,rfId:B,ariaLabel:F,isFocusable:W,isReconnectable:X,pathOptions:G,interactionWidth:K,disableKeyboardA11y:ee})=>{const q=y.useRef(null),[me,de]=y.useState(!1),[ge,fe]=y.useState(!1),ne=oe(),xe=y.useMemo(()=>`url('#${sn(D,B)}')`,[D,B]),Q=y.useMemo(()=>`url('#${sn(A,B)}')`,[A,B]);if(O)return null;const Z=se=>{const{edges:we,addSelectedEdges:Ie,unselectNodesAndEdges:Ae,multiSelectionActive:Ze}=ne.getState(),be=we.find(Pe=>Pe.id===n);be&&(I&&(ne.setState({nodesSelectionActive:!1}),be.selected&&Ze?(Ae({nodes:[],edges:[be]}),q.current?.blur()):Ie([n])),i&&i(se,be))},le=it(n,ne.getState,a),Te=it(n,ne.getState,H),nt=it(n,ne.getState,u),Ve=it(n,ne.getState,C),Le=it(n,ne.getState,w),Se=(se,we)=>{if(se.button!==0)return;const{edges:Ie,isValidConnection:Ae}=ne.getState(),Ze=we?N:m,be=(we?L:V)||null,Pe=we?"target":"source",It=Ae||ya,At=we,st=Ie.find(De=>De.id===n);fe(!0),b?.(se,st,Pe);const Pt=De=>{fe(!1),_?.(De,st,Pe)};Ho({event:se,handleId:be,nodeId:Ze,onConnect:De=>P?.(st,De),isTarget:At,getState:ne.getState,setState:ne.setState,isValidConnection:It,edgeUpdaterType:Pe,onReconnectEnd:Pt})},Fe=se=>Se(se,!0),_e=se=>Se(se,!1),ze=()=>de(!0),Be=()=>de(!1),Ue=!I&&!i,ot=se=>{if(!ee&&ko.includes(se.key)&&I){const{unselectNodesAndEdges:we,addSelectedEdges:Ie,edges:Ae}=ne.getState();se.key==="Escape"?(q.current?.blur(),we({edges:[Ae.find(be=>be.id===n)]})):Ie([n])}};return M.createElement("g",{className:ie(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:c,animated:d,inactive:Ue,updating:me}]),onClick:Z,onDoubleClick:le,onContextMenu:Te,onMouseEnter:nt,onMouseMove:Ve,onMouseLeave:Le,onKeyDown:W?ot:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${m} to ${N}`,"aria-describedby":W?`${Yo}-${B}`:void 0,ref:q},!ge&&M.createElement(e,{id:n,source:m,target:N,selected:c,animated:d,label:l,labelStyle:f,labelShowBg:h,labelBgStyle:g,labelBgPadding:v,labelBgBorderRadius:x,data:r,style:E,sourceX:k,sourceY:p,targetX:$,targetY:T,sourcePosition:j,targetPosition:z,sourceHandleId:V,targetHandleId:L,markerStart:xe,markerEnd:Q,pathOptions:G,interactionWidth:K}),X&&M.createElement(M.Fragment,null,(X==="source"||X===!0)&&M.createElement(qn,{position:j,centerX:k,centerY:p,radius:R,onMouseDown:Fe,onMouseEnter:ze,onMouseOut:Be,type:"source"}),(X==="target"||X===!0)&&M.createElement(qn,{position:z,centerX:$,centerY:T,radius:R,onMouseDown:_e,onMouseEnter:ze,onMouseOut:Be,type:"target"})))};return t.displayName="EdgeWrapper",y.memo(t)};function xa(e){const t={default:Ge(e.default||Ct),straight:Ge(e.bezier||pn),step:Ge(e.step||gn),smoothstep:Ge(e.step||Tt),simplebezier:Ge(e.simplebezier||mn)},n={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,r)=>(s[r]=Ge(e[r]||Ct),s),n);return{...t,...o}}function Qn(e,t,n=null){const o=(n?.x||0)+t.x,s=(n?.y||0)+t.y,r=n?.width||t.width,i=n?.height||t.height;switch(e){case U.Top:return{x:o+r/2,y:s};case U.Right:return{x:o+r,y:s+i/2};case U.Bottom:return{x:o+r/2,y:s+i};case U.Left:return{x:o,y:s+i/2}}}function Jn(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const wa=(e,t,n,o,s,r)=>{const i=Qn(n,e,t),a=Qn(r,o,s);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function ba({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:s,targetHeight:r,width:i,height:a,transform:c}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+s),y2:Math.max(e.y+o,t.y+r)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const l=hn({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:a/c[2]}),f=Math.max(0,Math.min(l.x2,d.x2)-Math.max(l.x,d.x)),h=Math.max(0,Math.min(l.y2,d.y2)-Math.max(l.y,d.y));return Math.ceil(f*h)>0}function eo(e){const t=e?.[te]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const Ea=[{level:0,isMaxLevel:!0,edges:[]}];function Sa(e,t,n=!1){let o=-1;const s=e.reduce((i,a)=>{const c=he(a.zIndex);let d=c?a.zIndex:0;if(n){const l=t.get(a.target),f=t.get(a.source),h=a.selected||l?.selected||f?.selected,g=Math.max(f?.[te]?.z||0,l?.[te]?.z||0,1e3);d=(c?a.zIndex:0)+(h?g:0)}return i[d]?i[d].push(a):i[d]=[a],o=d>o?d:o,i},{}),r=Object.entries(s).map(([i,a])=>{const c=+i;return{edges:a,level:c,isMaxLevel:c===o}});return r.length===0?Ea:r}function va(e,t,n){const o=J(y.useCallback(s=>e?s.edges.filter(r=>{const i=t.get(r.source),a=t.get(r.target);return i?.width&&i?.height&&a?.width&&a?.height&&ba({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,t]));return Sa(o,t,n)}const Na=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ca=({color:e="none",strokeWidth:t=1})=>M.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),to={[Nt.Arrow]:Na,[Nt.ArrowClosed]:Ca};function Ma(e){const t=oe();return y.useMemo(()=>Object.prototype.hasOwnProperty.call(to,e)?to[e]:(t.getState().onError?.("009",Ce.error009(e)),null),[e])}const ka=({id:e,type:t,color:n,width:o=12.5,height:s=12.5,markerUnits:r="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const c=Ma(t);return c?M.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:r,orient:a,refX:"0",refY:"0"},M.createElement(c,{color:n,strokeWidth:i})):null},$a=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((s,r)=>([r.markerStart,r.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=sn(i,t);o.includes(a)||(s.push({id:a,color:i.color||e,...i}),o.push(a))}}),s),[]).sort((s,r)=>s.id.localeCompare(r.id))},is=({defaultColor:e,rfId:t})=>{const n=J(y.useCallback($a({defaultColor:e,rfId:t}),[e,t]),(o,s)=>!(o.length!==s.length||o.some((r,i)=>r.id!==s[i].id)));return M.createElement("defs",null,n.map(o=>M.createElement(ka,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};is.displayName="MarkerDefinitions";var Ra=y.memo(is);const Ta=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),as=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:s,noPanClassName:r,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:l,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:g,onReconnectEnd:v,reconnectRadius:x,children:E,disableKeyboardA11y:m})=>{const{edgesFocusable:N,edgesUpdatable:k,elementsSelectable:p,width:$,height:T,connectionMode:j,nodeInternals:z,onError:I}=J(Ta,ce),O=va(t,z,n);return $?M.createElement(M.Fragment,null,O.map(({level:V,edges:L,isMaxLevel:H})=>M.createElement("svg",{key:V,style:{zIndex:V},width:$,height:T,className:"react-flow__edges react-flow__container"},H&&M.createElement(Ra,{defaultColor:e,rfId:o}),M.createElement("g",null,L.map(u=>{const[C,w,R]=eo(z.get(u.source)),[P,b,_]=eo(z.get(u.target));if(!R||!_)return null;let A=u.type||"default";s[A]||(I?.("011",Ce.error011(A)),A="default");const D=s[A]||s.default,B=j===Oe.Strict?b.target:(b.target??[]).concat(b.source??[]),F=Jn(w.source,u.sourceHandle),W=Jn(B,u.targetHandle),X=F?.position||U.Bottom,G=W?.position||U.Top,K=!!(u.focusable||N&&typeof u.focusable>"u"),ee=u.reconnectable||u.updatable,q=typeof h<"u"&&(ee||k&&typeof ee>"u");if(!F||!W)return I?.("008",Ce.error008(F,u)),null;const{sourceX:me,sourceY:de,targetX:ge,targetY:fe}=wa(C,F,X,P,W,G);return M.createElement(D,{key:u.id,id:u.id,className:ie([u.className,r]),type:A,data:u.data,selected:!!u.selected,animated:!!u.animated,hidden:!!u.hidden,label:u.label,labelStyle:u.labelStyle,labelShowBg:u.labelShowBg,labelBgStyle:u.labelBgStyle,labelBgPadding:u.labelBgPadding,labelBgBorderRadius:u.labelBgBorderRadius,style:u.style,source:u.source,target:u.target,sourceHandleId:u.sourceHandle,targetHandleId:u.targetHandle,markerEnd:u.markerEnd,markerStart:u.markerStart,sourceX:me,sourceY:de,targetX:ge,targetY:fe,sourcePosition:X,targetPosition:G,elementsSelectable:p,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:d,onClick:l,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:g,onReconnectEnd:v,reconnectRadius:x,rfId:o,ariaLabel:u.ariaLabel,isFocusable:K,isReconnectable:q,pathOptions:"pathOptions"in u?u.pathOptions:void 0,interactionWidth:u.interactionWidth,disableKeyboardA11y:m})})))),E):null};as.displayName="EdgeRenderer";var _a=y.memo(as);const za=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Ia({children:e}){const t=J(za);return M.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Aa(e){const t=gt(),n=y.useRef(!1);y.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Pa={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},cs=({nodeId:e,handleType:t,style:n,type:o=ve.Bezier,CustomComponent:s,connectionStatus:r})=>{const{fromNode:i,handleId:a,toX:c,toY:d,connectionMode:l}=J(y.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),ce),f=i?.[te]?.handleBounds;let h=f?.[t];if(l===Oe.Loose&&(h=h||f?.[t==="source"?"target":"source"]),!i||!h)return null;const g=a?h.find(T=>T.id===a):h[0],v=g?g.x+g.width/2:(i.width??0)/2,x=g?g.y+g.height/2:i.height??0,E=(i.positionAbsolute?.x??0)+v,m=(i.positionAbsolute?.y??0)+x,N=g?.position,k=N?Pa[N]:null;if(!N||!k)return null;if(s)return M.createElement(s,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:E,fromY:m,toX:c,toY:d,fromPosition:N,toPosition:k,connectionStatus:r});let p="";const $={sourceX:E,sourceY:m,sourcePosition:N,targetX:c,targetY:d,targetPosition:k};return o===ve.Bezier?[p]=zo($):o===ve.Step?[p]=on({...$,borderRadius:0}):o===ve.SmoothStep?[p]=on($):o===ve.SimpleBezier?[p]=_o($):p=`M${E},${m} ${c},${d}`,M.createElement("path",{d:p,fill:"none",className:"react-flow__connection-path",style:n})};cs.displayName="ConnectionLine";const Da=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function ja({containerStyle:e,style:t,type:n,component:o}){const{nodeId:s,handleType:r,nodesConnectable:i,width:a,height:c,connectionStatus:d}=J(Da,ce);return!(s&&r&&a&&i)?null:M.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},M.createElement("g",{className:ie(["react-flow__connection",d])},M.createElement(cs,{nodeId:s,handleType:r,style:t,type:n,CustomComponent:o,connectionStatus:d})))}function no(e,t){return y.useRef(null),oe(),y.useMemo(()=>t(e),[e])}const ls=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:s,onInit:r,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:g,onSelectionContextMenu:v,onSelectionStart:x,onSelectionEnd:E,connectionLineType:m,connectionLineStyle:N,connectionLineComponent:k,connectionLineContainerStyle:p,selectionKeyCode:$,selectionOnDrag:T,selectionMode:j,multiSelectionKeyCode:z,panActivationKeyCode:I,zoomActivationKeyCode:O,deleteKeyCode:V,onlyRenderVisibleElements:L,elementsSelectable:H,selectNodesOnDrag:u,defaultViewport:C,translateExtent:w,minZoom:R,maxZoom:P,preventScrolling:b,defaultMarkerColor:_,zoomOnScroll:A,zoomOnPinch:D,panOnScroll:B,panOnScrollSpeed:F,panOnScrollMode:W,zoomOnDoubleClick:X,panOnDrag:G,onPaneClick:K,onPaneMouseEnter:ee,onPaneMouseMove:q,onPaneMouseLeave:me,onPaneScroll:de,onPaneContextMenu:ge,onEdgeContextMenu:fe,onEdgeMouseEnter:ne,onEdgeMouseMove:xe,onEdgeMouseLeave:Q,onReconnect:Z,onReconnectStart:le,onReconnectEnd:Te,reconnectRadius:nt,noDragClassName:Ve,noWheelClassName:Le,noPanClassName:Se,elevateEdgesOnSelect:Fe,disableKeyboardA11y:_e,nodeOrigin:ze,nodeExtent:Be,rfId:Ue})=>{const ot=no(e,da),se=no(t,xa);return Aa(r),M.createElement(la,{onPaneClick:K,onPaneMouseEnter:ee,onPaneMouseMove:q,onPaneMouseLeave:me,onPaneContextMenu:ge,onPaneScroll:de,deleteKeyCode:V,selectionKeyCode:$,selectionOnDrag:T,selectionMode:j,onSelectionStart:x,onSelectionEnd:E,multiSelectionKeyCode:z,panActivationKeyCode:I,zoomActivationKeyCode:O,elementsSelectable:H,onMove:n,onMoveStart:o,onMoveEnd:s,zoomOnScroll:A,zoomOnPinch:D,zoomOnDoubleClick:X,panOnScroll:B,panOnScrollSpeed:F,panOnScrollMode:W,panOnDrag:G,defaultViewport:C,translateExtent:w,minZoom:R,maxZoom:P,onSelectionContextMenu:v,preventScrolling:b,noDragClassName:Ve,noWheelClassName:Le,noPanClassName:Se,disableKeyboardA11y:_e},M.createElement(Ia,null,M.createElement(_a,{edgeTypes:se,onEdgeClick:a,onEdgeDoubleClick:d,onlyRenderVisibleElements:L,onEdgeContextMenu:fe,onEdgeMouseEnter:ne,onEdgeMouseMove:xe,onEdgeMouseLeave:Q,onReconnect:Z,onReconnectStart:le,onReconnectEnd:Te,reconnectRadius:nt,defaultMarkerColor:_,noPanClassName:Se,elevateEdgesOnSelect:!!Fe,disableKeyboardA11y:_e,rfId:Ue},M.createElement(ja,{style:N,type:m,component:k,containerStyle:p})),M.createElement("div",{className:"react-flow__edgelabel-renderer"}),M.createElement(ma,{nodeTypes:ot,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:g,selectNodesOnDrag:u,onlyRenderVisibleElements:L,noPanClassName:Se,noDragClassName:Ve,disableKeyboardA11y:_e,nodeOrigin:ze,nodeExtent:Be,rfId:Ue})))};ls.displayName="GraphView";var Ha=y.memo(ls);const ln=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Me={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ln,nodeExtent:ln,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Oe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:fi,isValidConnection:void 0},Oa=()=>Or((e,t)=>({...Me,setNodes:n=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:r}=t();e({nodeInternals:Bt(n,o,s,r)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(n,o)=>{const s=typeof n<"u",r=typeof o<"u",i=s?Bt(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:r?o:[],hasDefaultNodes:s,hasDefaultEdges:r})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:r,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:c,nodeOrigin:d}=t(),l=c?.querySelector(".react-flow__viewport");if(!l)return;const f=window.getComputedStyle(l),{m22:h}=new window.DOMMatrixReadOnly(f.transform),g=n.reduce((x,E)=>{const m=s.get(E.id);if(m?.hidden)s.set(m.id,{...m,[te]:{...m[te],handleBounds:void 0}});else if(m){const N=dn(E.nodeElement);!!(N.width&&N.height&&(m.width!==N.width||m.height!==N.height||E.forceUpdate))&&(s.set(m.id,{...m,[te]:{...m[te],handleBounds:{source:Gn(".source",E.nodeElement,h,d),target:Gn(".target",E.nodeElement,h,d)}},...N}),x.push({id:m.id,type:"dimensions",dimensions:N}))}return x},[]);Go(s,d);const v=i||r&&!i&&Ko(t,{initial:!0,...a});e({nodeInternals:new Map(s),fitViewOnInitDone:v}),g?.length>0&&o?.(g)},updateNodePositions:(n,o=!0,s=!1)=>{const{triggerNodeChanges:r}=t(),i=n.map(a=>{const c={id:a.id,type:"position",dragging:s};return o&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});r(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:r,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:c}=t();if(n?.length){if(r){const d=Qo(n,a()),l=Bt(d,s,i,c);e({nodeInternals:l})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:s,getNodes:r}=t();let i,a=null;o?i=n.map(c=>ke(c,!0)):(i=Ke(r(),n),a=Ke(s,[])),bt({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:s,getNodes:r}=t();let i,a=null;o?i=n.map(c=>ke(c,!0)):(i=Ke(s,n),a=Ke(r(),[])),bt({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:s,getNodes:r}=t(),i=n||r(),a=o||s,c=i.map(l=>(l.selected=!1,ke(l.id,!1))),d=a.map(l=>ke(l.id,!1));bt({changedNodes:c,changedEdges:d,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:s}=t();o?.scaleExtent([n,s]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:s}=t();o?.scaleExtent([s,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),r=o().filter(a=>a.selected).map(a=>ke(a.id,!1)),i=n.filter(a=>a.selected).map(a=>ke(a.id,!1));bt({changedNodes:r,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(s=>{s.positionAbsolute=fn(s.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:s,height:r,d3Zoom:i,d3Selection:a,translateExtent:c}=t();if(!i||!a||!n.x&&!n.y)return!1;const d=$e.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),l=[[0,0],[s,r]],f=i?.constrain()(d,l,c);return i.transform(a,f),o[0]!==f.x||o[1]!==f.y||o[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Me.connectionNodeId,connectionHandleId:Me.connectionHandleId,connectionHandleType:Me.connectionHandleType,connectionStatus:Me.connectionStatus,connectionStartHandle:Me.connectionStartHandle,connectionEndHandle:Me.connectionEndHandle}),reset:()=>e({...Me})}),Object.is),Sn=({children:e})=>{const t=y.useRef(null);return t.current||(t.current=Oa()),M.createElement(si,{value:t.current},e)};Sn.displayName="ReactFlowProvider";const us=({children:e})=>y.useContext(Rt)?M.createElement(M.Fragment,null,e):M.createElement(Sn,null,e);us.displayName="ReactFlowWrapper";const Va={input:Fo,default:an,output:Uo,group:bn},La={default:Ct,straight:pn,step:gn,smoothstep:Tt,simplebezier:mn},Fa=[0,0],Ba=[15,15],Ua={x:0,y:0,zoom:1},Za={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ds=y.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:s,nodeTypes:r=Va,edgeTypes:i=La,onNodeClick:a,onEdgeClick:c,onInit:d,onMove:l,onMoveStart:f,onMoveEnd:h,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:m,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:p,onNodeContextMenu:$,onNodeDoubleClick:T,onNodeDragStart:j,onNodeDrag:z,onNodeDragStop:I,onNodesDelete:O,onEdgesDelete:V,onSelectionChange:L,onSelectionDragStart:H,onSelectionDrag:u,onSelectionDragStop:C,onSelectionContextMenu:w,onSelectionStart:R,onSelectionEnd:P,connectionMode:b=Oe.Strict,connectionLineType:_=ve.Bezier,connectionLineStyle:A,connectionLineComponent:D,connectionLineContainerStyle:B,deleteKeyCode:F="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:X=!1,selectionMode:G=ft.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:ee=vt()?"Meta":"Control",zoomActivationKeyCode:q=vt()?"Meta":"Control",snapToGrid:me=!1,snapGrid:de=Ba,onlyRenderVisibleElements:ge=!1,selectNodesOnDrag:fe=!0,nodesDraggable:ne,nodesConnectable:xe,nodesFocusable:Q,nodeOrigin:Z=Fa,edgesFocusable:le,edgesUpdatable:Te,elementsSelectable:nt,defaultViewport:Ve=Ua,minZoom:Le=.5,maxZoom:Se=2,translateExtent:Fe=ln,preventScrolling:_e=!0,nodeExtent:ze,defaultMarkerColor:Be="#b1b1b7",zoomOnScroll:Ue=!0,zoomOnPinch:ot=!0,panOnScroll:se=!1,panOnScrollSpeed:we=.5,panOnScrollMode:Ie=He.Free,zoomOnDoubleClick:Ae=!0,panOnDrag:Ze=!0,onPaneClick:be,onPaneMouseEnter:Pe,onPaneMouseMove:It,onPaneMouseLeave:At,onPaneScroll:st,onPaneContextMenu:Pt,children:Cn,onEdgeContextMenu:De,onEdgeDoubleClick:Es,onEdgeMouseEnter:Ss,onEdgeMouseMove:vs,onEdgeMouseLeave:Ns,onEdgeUpdate:Cs,onEdgeUpdateStart:Ms,onEdgeUpdateEnd:ks,onReconnect:$s,onReconnectStart:Rs,onReconnectEnd:Ts,reconnectRadius:_s=10,edgeUpdaterRadius:zs=10,onNodesChange:Is,onEdgesChange:As,noDragClassName:Ps="nodrag",noWheelClassName:Ds="nowheel",noPanClassName:Mn="nopan",fitView:js=!1,fitViewOptions:Hs,connectOnClick:Os=!0,attributionPosition:Vs,proOptions:Ls,defaultEdgeOptions:Fs,elevateNodesOnSelect:Bs=!0,elevateEdgesOnSelect:Us=!1,disableKeyboardA11y:kn=!1,autoPanOnConnect:Zs=!0,autoPanOnNodeDrag:Ws=!0,connectionRadius:Ys=20,isValidConnection:Xs,onError:Gs,style:Ks,id:$n,nodeDragThreshold:qs,...Qs},Js)=>{const Dt=$n||"1";return M.createElement("div",{...Qs,style:{...Ks,...Za},ref:Js,className:ie(["react-flow",s]),"data-testid":"rf__wrapper",id:$n},M.createElement(us,null,M.createElement(Ha,{onInit:d,onMove:l,onMoveStart:f,onMoveEnd:h,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:p,onNodeContextMenu:$,onNodeDoubleClick:T,nodeTypes:r,edgeTypes:i,connectionLineType:_,connectionLineStyle:A,connectionLineComponent:D,connectionLineContainerStyle:B,selectionKeyCode:W,selectionOnDrag:X,selectionMode:G,deleteKeyCode:F,multiSelectionKeyCode:ee,panActivationKeyCode:K,zoomActivationKeyCode:q,onlyRenderVisibleElements:ge,selectNodesOnDrag:fe,defaultViewport:Ve,translateExtent:Fe,minZoom:Le,maxZoom:Se,preventScrolling:_e,zoomOnScroll:Ue,zoomOnPinch:ot,zoomOnDoubleClick:Ae,panOnScroll:se,panOnScrollSpeed:we,panOnScrollMode:Ie,panOnDrag:Ze,onPaneClick:be,onPaneMouseEnter:Pe,onPaneMouseMove:It,onPaneMouseLeave:At,onPaneScroll:st,onPaneContextMenu:Pt,onSelectionContextMenu:w,onSelectionStart:R,onSelectionEnd:P,onEdgeContextMenu:De,onEdgeDoubleClick:Es,onEdgeMouseEnter:Ss,onEdgeMouseMove:vs,onEdgeMouseLeave:Ns,onReconnect:$s??Cs,onReconnectStart:Rs??Ms,onReconnectEnd:Ts??ks,reconnectRadius:_s??zs,defaultMarkerColor:Be,noDragClassName:Ps,noWheelClassName:Ds,noPanClassName:Mn,elevateEdgesOnSelect:Us,rfId:Dt,disableKeyboardA11y:kn,nodeOrigin:Z,nodeExtent:ze}),M.createElement(Pi,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:g,onConnectStart:v,onConnectEnd:x,onClickConnectStart:E,onClickConnectEnd:m,nodesDraggable:ne,nodesConnectable:xe,nodesFocusable:Q,edgesFocusable:le,edgesUpdatable:Te,elementsSelectable:nt,elevateNodesOnSelect:Bs,minZoom:Le,maxZoom:Se,nodeExtent:ze,onNodesChange:Is,onEdgesChange:As,snapToGrid:me,snapGrid:de,connectionMode:b,translateExtent:Fe,connectOnClick:Os,defaultEdgeOptions:Fs,fitView:js,fitViewOptions:Hs,onNodesDelete:O,onEdgesDelete:V,onNodeDragStart:j,onNodeDrag:z,onNodeDragStop:I,onSelectionDrag:u,onSelectionDragStart:H,onSelectionDragStop:C,noPanClassName:Mn,nodeOrigin:Z,rfId:Dt,autoPanOnConnect:Zs,autoPanOnNodeDrag:Ws,onError:Gs,connectionRadius:Ys,isValidConnection:Xs,nodeDragThreshold:qs}),M.createElement(Ii,{onSelectionChange:L}),Cn,M.createElement(ii,{proOptions:Ls,position:Vs}),M.createElement(Vi,{rfId:Dt,disableKeyboardA11y:kn})))});ds.displayName="ReactFlow";function fs(e){return t=>{const[n,o]=y.useState(t),s=y.useCallback(r=>o(i=>e(r,i)),[]);return[n,o,s]}}const Wa=fs(Qo),Ya=fs(ea);function Xa(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,s]of e)if(!Object.is(s,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}function Ga(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},M.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ka(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},M.createElement("path",{d:"M0 0h32v4.2H0z"}))}function qa(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},M.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Qa(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},M.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ja(){return M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},M.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const lt=({children:e,className:t,...n})=>M.createElement("button",{type:"button",className:ie(["react-flow__controls-button",t]),...n},e);lt.displayName="ControlButton";const ec=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),hs=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:r,onZoomOut:i,onFitView:a,onInteractiveChange:c,className:d,children:l,position:f="bottom-left"})=>{const h=oe(),[g,v]=y.useState(!1),{isInteractive:x,minZoomReached:E,maxZoomReached:m}=J(ec,Xa),{zoomIn:N,zoomOut:k,fitView:p}=gt();if(y.useEffect(()=>{v(!0)},[]),!g)return null;const $=()=>{N(),r?.()},T=()=>{k(),i?.()},j=()=>{p(s),a?.()},z=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c?.(!x)};return M.createElement(dt,{className:ie(["react-flow__controls",d]),position:f,style:e,"data-testid":"rf__controls"},t&&M.createElement(M.Fragment,null,M.createElement(lt,{onClick:$,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},M.createElement(Ga,null)),M.createElement(lt,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},M.createElement(Ka,null))),n&&M.createElement(lt,{className:"react-flow__controls-fitview",onClick:j,title:"fit view","aria-label":"fit view"},M.createElement(qa,null)),o&&M.createElement(lt,{className:"react-flow__controls-interactive",onClick:z,title:"toggle interactivity","aria-label":"toggle interactivity"},x?M.createElement(Ja,null):M.createElement(Qa,null)),l)};hs.displayName="Controls";var tc=y.memo(hs);function nc(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,s]of e)if(!Object.is(s,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var ye;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ye||(ye={}));function oc({color:e,dimensions:t,lineWidth:n}){return M.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function sc({color:e,radius:t}){return M.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const rc={[ye.Dots]:"#91919a",[ye.Lines]:"#eee",[ye.Cross]:"#e2e2e2"},ic={[ye.Dots]:1,[ye.Lines]:1,[ye.Cross]:6},ac=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ms({id:e,variant:t=ye.Dots,gap:n=20,size:o,lineWidth:s=1,offset:r=2,color:i,style:a,className:c}){const d=y.useRef(null),{transform:l,patternId:f}=J(ac,nc),h=i||rc[t],g=o||ic[t],v=t===ye.Dots,x=t===ye.Cross,E=Array.isArray(n)?n:[n,n],m=[E[0]*l[2]||1,E[1]*l[2]||1],N=g*l[2],k=x?[N,N]:m,p=v?[N/r,N/r]:[k[0]/r,k[1]/r];return M.createElement("svg",{className:ie(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},M.createElement("pattern",{id:f+e,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${p[0]},-${p[1]})`},v?M.createElement(sc,{color:h,radius:N/r}):M.createElement(oc,{dimensions:k,color:h,lineWidth:s})),M.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}ms.displayName="Background";var cc=y.memo(ms);function Yt(...e){return e.filter(Boolean).join(" ")}function lc({data:e,sourcePosition:t,targetPosition:n}){const{label:o,bgColor:s="bg-blue-500",mode:r,service:i,showTarget:a=!0,showSource:c=!0}=e,{version:d,owners:l=[],sends:f=[],receives:h=[],name:g}=i.data;return S.jsxs("div",{className:Yt("w-full rounded-md border flex justify-start  bg-white text-black border-pink-500"),children:[S.jsxs("div",{className:Yt("bg-gradient-to-b from-pink-500 to-pink-700 relative flex items-center w-5 justify-center rounded-l-sm text-red-100-500","border-r-[1px] border-pink-500"),children:[S.jsx(dr,{className:"w-4 h-4 opacity-90 text-white absolute top-1 "}),r==="full"&&S.jsx("span",{className:"rotate -rotate-90 w-1/2 text-center absolute bottom-1 text-[9px] text-white font-bold uppercase tracking-[3px] ",children:"Service"})]}),S.jsxs("div",{className:"p-1 min-w-60 max-w-[min-content]",children:[a&&S.jsx(re,{type:"target",position:n}),c&&S.jsx(re,{type:"source",position:t}),S.jsxs("div",{className:Yt(r==="full"?"border-b border-gray-200":""),children:[S.jsx("span",{className:"text-xs font-bold block pt-0.5 pb-0.5",children:g}),S.jsxs("div",{className:"flex justify-between",children:[S.jsxs("span",{className:"text-[10px] font-light block pt-0.5 pb-0.5 ",children:["v",d]}),r==="simple"&&S.jsx("span",{className:"text-[10px] text-gray-500 font-light block pt-0.5 pb-0.5 ",children:"Service"})]})]}),r==="full"&&S.jsxs("div",{className:"divide-y divide-gray-200 ",children:[S.jsx("div",{className:"leading-3 py-1",children:S.jsx("span",{className:"text-[8px] font-light",children:i.data.summary})}),S.jsxs("div",{className:"grid grid-cols-2 gap-x-4 py-1",children:[S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Receives messages: ",h.length]}),S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Publishes messages: ",f.length]}),S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Owners: ",l.length]})]})]})]})]})}function Xt(...e){return e.filter(Boolean).join(" ")}function uc({data:e,sourcePosition:t,targetPosition:n}){const{mode:o,message:s,showTarget:r=!0,showSource:i=!0}=e,{name:a,version:c,summary:d,owners:l=[],producers:f=[],consumers:h=[]}=s.data,g=r||n&&f.length>0,v=i||t&&h.length>0;return S.jsxs("div",{className:Xt("w-full rounded-md border flex justify-start  bg-white text-black border-orange-400"),children:[S.jsxs("div",{className:Xt("bg-gradient-to-b from-orange-500 to-orange-700 relative flex items-center w-5 justify-center rounded-l-sm text-orange-100-500","border-r-[1px] border-orange-500"),children:[S.jsx(ar,{className:"w-4 h-4 opacity-90 text-white absolute top-1 "}),o==="full"&&S.jsx("span",{className:"rotate -rotate-90 w-1/2 text-center absolute bottom-1 text-[9px] text-white font-bold uppercase tracking-[3px] ",children:"Event"})]}),S.jsxs("div",{className:"p-1 min-w-60 max-w-[min-content]",children:[g&&S.jsx(re,{type:"target",position:n}),v&&S.jsx(re,{type:"source",position:t}),S.jsxs("div",{className:Xt(o==="full"?"border-b border-gray-200":""),children:[S.jsx("span",{className:"text-xs font-bold block pb-0.5",children:a}),S.jsxs("div",{className:"flex justify-between",children:[S.jsxs("span",{className:"text-[10px] font-light block pt-0.5 pb-0.5 ",children:["v",c]}),o==="simple"&&S.jsx("span",{className:"text-[10px] text-gray-500 font-light block pt-0.5 pb-0.5 ",children:"Event"})]})]}),o==="full"&&S.jsxs("div",{className:"divide-y divide-gray-200 ",children:[S.jsx("div",{className:"leading-3 py-1",children:S.jsx("span",{className:"text-[8px] font-light",children:d})}),S.jsxs("div",{className:"grid grid-cols-2 gap-x-4 py-1",children:[S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Producers: ",f.length]}),S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Consumers: ",h.length]}),S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Owners: ",l.length]})]})]})]})]})}function Gt(...e){return e.filter(Boolean).join(" ")}function oo({data:e,sourcePosition:t,targetPosition:n}){const{mode:o,step:s,showTarget:r=!0,showSource:i=!0}=e,{summary:a,actor:{name:c}={}}=s,d=r||!0,l=i||!0;return S.jsxs("div",{className:Gt("w-full rounded-md border flex justify-start  bg-white text-black border-yellow-400",o==="full"?"min-h-[5em]":"min-h-[2em]"),children:[S.jsxs("div",{className:Gt("bg-gradient-to-b from-yellow-400 to-yellow-600 relative flex items-center w-5 justify-center rounded-l-sm text-orange-100-500","border-r-[1px] border-yellow-500"),children:[S.jsx(rr,{className:"w-4 h-4 opacity-90 text-white absolute top-1 "}),o==="full"&&S.jsx("span",{className:"rotate -rotate-90 w-1/2 text-center absolute bottom-1 text-[9px] text-white font-bold uppercase tracking-[3px] ",children:"ACTOR"})]}),S.jsxs("div",{className:"p-1 min-w-60 max-w-[min-content]",children:[d&&S.jsx(re,{type:"target",position:n}),l&&S.jsx(re,{type:"source",position:t}),(!a||o!=="full")&&S.jsxs("div",{className:"h-full ",children:[S.jsx("span",{className:"text-sm font-bold block pb-0.5 block w-full",children:c}),o==="simple"&&S.jsx("div",{className:"w-full text-right",children:S.jsx("span",{className:" w-full text-[10px] text-gray-500 font-light block pt-0.5 pb-0.5 ",children:"Event"})})]}),a&&o==="full"&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:Gt(o==="full"?"border-b border-gray-200":""),children:S.jsx("span",{className:"text-xs font-bold block pb-0.5",children:c})}),o==="full"&&S.jsx("div",{className:"divide-y divide-gray-200 ",children:S.jsx("div",{className:"leading-3 py-1",children:S.jsx("span",{className:"text-[8px] font-light",children:a})})})]})]})]})}function Kt(...e){return e.filter(Boolean).join(" ")}function dc({data:e,sourcePosition:t,targetPosition:n}){const{mode:o,step:s,showTarget:r=!0,showSource:i=!0}=e,{title:a,summary:c}=s,d=r||!0,l=i||!0;return S.jsxs("div",{className:Kt("w-full rounded-md border flex justify-start  bg-white text-black border-blue-400 min-h-[3em]"),children:[S.jsx("div",{className:Kt("bg-gradient-to-b from-gray-700 to-gray-700 relative flex items-center w-5 justify-center rounded-l-sm text-orange-100-500","border-r-[1px] border-gray-500"),children:o==="full"&&S.jsx("span",{className:"rotate -rotate-90 w-1/2 text-center absolute bottom-1 text-[9px] text-white font-bold uppercase tracking-[3px] ",children:"Step"})}),S.jsxs("div",{className:"p-1 min-w-60 max-w-[min-content]",children:[d&&S.jsx(re,{type:"target",position:n}),l&&S.jsx(re,{type:"source",position:t}),!c&&S.jsx("div",{className:"h-full flex items-center",children:S.jsx("span",{className:"text-sm font-bold block pb-0.5",children:a})}),c&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:Kt(o==="full"?"border-b border-gray-200":""),children:S.jsx("span",{className:"text-xs font-bold block pb-0.5",children:a})}),o==="full"&&S.jsx("div",{className:"divide-y divide-gray-200 ",children:S.jsx("div",{className:"leading-3 py-1",children:S.jsx("span",{className:"text-[8px] font-light",children:c})})})]})]})]})}function qt(...e){return e.filter(Boolean).join(" ")}function fc({data:e,sourcePosition:t,targetPosition:n}){const{mode:o,message:s,showSource:r=!0,showTarget:i=!0}=e,{name:a,version:c,summary:d,owners:l=[],producers:f=[],consumers:h=[]}=s.data,g=i||n&&f.length>0,v=r||t&&h.length>0;return S.jsxs("div",{className:qt("w-full rounded-md border flex justify-start  bg-white text-black border-blue-400"),children:[S.jsxs("div",{className:qt("bg-gradient-to-b from-blue-500 to-blue-700 relative flex items-center w-5 justify-center rounded-l-sm text-blue-100-500","border-r-[1px] border-blue-500"),children:[S.jsx(lr,{className:"w-4 h-4 opacity-90 text-white absolute top-1 "}),o==="full"&&S.jsx("span",{className:"rotate -rotate-90 w-1/2 text-center absolute bottom-1 text-[9px] text-white font-bold uppercase tracking-[3px] ",children:"Command"})]}),S.jsxs("div",{className:"p-1 min-w-60 max-w-[min-content]",children:[g&&S.jsx(re,{type:"target",position:n}),v&&S.jsx(re,{type:"source",position:t}),S.jsxs("div",{className:qt(o==="full"?"border-b border-gray-200":""),children:[S.jsx("span",{className:"text-xs font-bold block pb-0.5",children:a}),S.jsxs("div",{className:"flex justify-between",children:[S.jsxs("span",{className:"text-[10px] font-light block pt-0.5 pb-0.5 ",children:["v",c]}),o==="simple"&&S.jsx("span",{className:"text-[10px] text-gray-500 font-light block pt-0.5 pb-0.5 ",children:"Command"})]})]}),o==="full"&&S.jsxs("div",{className:"divide-y divide-gray-200 ",children:[S.jsx("div",{className:"leading-3 py-1",children:S.jsx("span",{className:"text-[8px] font-light",children:d})}),S.jsxs("div",{className:"grid grid-cols-2 gap-x-4 py-1",children:[S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Producers: ",f.length]}),S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Consumers: ",h.length]}),S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["Owners: ",l.length]})]})]})]})]})}function Qt(...e){return e.filter(Boolean).join(" ")}function hc({data:e,sourcePosition:t,targetPosition:n}){const{mode:o,step:s,showTarget:r=!0,showSource:i=!0}=e,{externalSystem:a}=s,{name:c,summary:d,url:l}=a;return S.jsxs("div",{className:Qt("w-full rounded-md border flex justify-start  bg-white text-black border-pink-500",o==="full"?"min-h-[7em]":"min-h-[2em]"),children:[S.jsxs("div",{className:Qt("bg-gradient-to-b from-pink-500 to-pink-700 relative flex items-center w-5 justify-center rounded-l-sm text-red-100-500","border-r-[1px] border-pink-500"),children:[S.jsx(or,{className:"w-4 h-4 opacity-90 text-white absolute top-1 "}),o==="full"&&S.jsx("span",{className:"rotate -rotate-90 w-1/2 text-center absolute bottom-1 text-[9px] text-white font-bold uppercase tracking-[3px] ",children:"External"})]}),S.jsxs("div",{className:"p-1 min-w-60 max-w-[min-content]",children:[r&&S.jsx(re,{type:"target",position:n}),i&&S.jsx(re,{type:"source",position:t}),S.jsx("div",{className:Qt(o==="full"?"border-b border-gray-200":""),children:S.jsxs("div",{className:"h-full ",children:[S.jsx("span",{className:"text-sm font-bold pb-0.5 block w-full",children:c}),o==="simple"&&S.jsx("div",{className:"w-full text-right",children:S.jsx("span",{className:" w-full text-[10px] text-gray-500 font-light block pt-0.5 pb-0.5 ",children:"External System"})})]})}),o==="full"&&S.jsxs("div",{className:"divide-y divide-gray-200 ",children:[S.jsx("div",{className:"leading-3 py-1",children:S.jsx("span",{className:"text-[8px] font-light",children:d})}),l&&S.jsx("div",{className:"grid grid-cols-2 gap-x-4 py-1",children:S.jsxs("span",{className:"text-xs",style:{fontSize:"0.2em"},children:["URL:"," ",S.jsx("a",{href:l,target:"_blank",className:"text-primary underline",children:l})]})})]})]})]})}function mc(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(s),t&&(o.href=t),s.href=e,s.href}const gc=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Ne(e){const t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}function Mt(e,t){const o=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return o?parseFloat(o.replace("px","")):0}function pc(e){const t=Mt(e,"border-left-width"),n=Mt(e,"border-right-width");return e.clientWidth+t+n}function yc(e){const t=Mt(e,"border-top-width"),n=Mt(e,"border-bottom-width");return e.clientHeight+t+n}function gs(e,t={}){const n=t.width||pc(e),o=t.height||yc(e);return{width:n,height:o}}function xc(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const ue=16384;function wc(e){(e.width>ue||e.height>ue)&&(e.width>ue&&e.height>ue?e.width>e.height?(e.height*=ue/e.width,e.width=ue):(e.width*=ue/e.height,e.height=ue):e.width>ue?(e.height*=ue/e.width,e.width=ue):(e.width*=ue/e.height,e.height=ue))}function kt(e){return new Promise((t,n)=>{const o=new Image;o.decode=()=>t(o),o.onload=()=>t(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e})}async function bc(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Ec(e,t,n){const o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg"),r=document.createElementNS(o,"foreignObject");return s.setAttribute("width",`${t}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${t} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),s.appendChild(r),r.appendChild(e),bc(s)}const ae=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||ae(n,t)};function Sc(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function vc(e){return Ne(e).map(t=>{const n=e.getPropertyValue(t),o=e.getPropertyPriority(t);return`${t}: ${n}${o?" !important":""};`}).join(" ")}function Nc(e,t,n){const o=`.${e}:${t}`,s=n.cssText?Sc(n):vc(n);return document.createTextNode(`${o}{${s}}`)}function so(e,t,n){const o=window.getComputedStyle(e,n),s=o.getPropertyValue("content");if(s===""||s==="none")return;const r=gc();try{t.className=`${t.className} ${r}`}catch{return}const i=document.createElement("style");i.appendChild(Nc(r,n,o)),t.appendChild(i)}function Cc(e,t){so(e,t,":before"),so(e,t,":after")}const ro="application/font-woff",io="image/jpeg",Mc={woff:ro,woff2:ro,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:io,jpeg:io,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function kc(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function vn(e){const t=kc(e).toLowerCase();return Mc[t]||""}function $c(e){return e.split(/,/)[1]}function un(e){return e.search(/^(data:)/)!==-1}function Rc(e,t){return`data:${t};base64,${e}`}async function ps(e,t,n){const o=await fetch(e,t);if(o.status===404)throw new Error(`Resource "${o.url}" not found`);const s=await o.blob();return new Promise((r,i)=>{const a=new FileReader;a.onerror=i,a.onloadend=()=>{try{r(n({res:o,result:a.result}))}catch(c){i(c)}},a.readAsDataURL(s)})}const Jt={};function Tc(e,t,n){let o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?`[${t}]${o}`:o}async function Nn(e,t,n){const o=Tc(e,t,n.includeQueryParams);if(Jt[o]!=null)return Jt[o];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let s;try{const r=await ps(e,n.fetchRequestInit,({res:i,result:a})=>(t||(t=i.headers.get("Content-Type")||""),$c(a)));s=Rc(r,t)}catch(r){s=n.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;r&&(i=typeof r=="string"?r:r.message),i&&console.warn(i)}return Jt[o]=s,s}async function _c(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):kt(t)}async function zc(e,t){if(e.currentSrc){const r=document.createElement("canvas"),i=r.getContext("2d");r.width=e.clientWidth,r.height=e.clientHeight,i?.drawImage(e,0,0,r.width,r.height);const a=r.toDataURL();return kt(a)}const n=e.poster,o=vn(n),s=await Nn(n,o,t);return kt(s)}async function Ic(e){var t;try{if(!((t=e?.contentDocument)===null||t===void 0)&&t.body)return await zt(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function Ac(e,t){return ae(e,HTMLCanvasElement)?_c(e):ae(e,HTMLVideoElement)?zc(e,t):ae(e,HTMLIFrameElement)?Ic(e):e.cloneNode(!1)}const Pc=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function Dc(e,t,n){var o,s;let r=[];return Pc(e)&&e.assignedNodes?r=Ne(e.assignedNodes()):ae(e,HTMLIFrameElement)&&(!((o=e.contentDocument)===null||o===void 0)&&o.body)?r=Ne(e.contentDocument.body.childNodes):r=Ne(((s=e.shadowRoot)!==null&&s!==void 0?s:e).childNodes),r.length===0||ae(e,HTMLVideoElement)||await r.reduce((i,a)=>i.then(()=>zt(a,n)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function jc(e,t){const n=t.style;if(!n)return;const o=window.getComputedStyle(e);o.cssText?(n.cssText=o.cssText,n.transformOrigin=o.transformOrigin):Ne(o).forEach(s=>{let r=o.getPropertyValue(s);s==="font-size"&&r.endsWith("px")&&(r=`${Math.floor(parseFloat(r.substring(0,r.length-2)))-.1}px`),ae(e,HTMLIFrameElement)&&s==="display"&&r==="inline"&&(r="block"),s==="d"&&t.getAttribute("d")&&(r=`path(${t.getAttribute("d")})`),n.setProperty(s,r,o.getPropertyPriority(s))})}function Hc(e,t){ae(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),ae(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Oc(e,t){if(ae(e,HTMLSelectElement)){const n=t,o=Array.from(n.children).find(s=>e.value===s.getAttribute("value"));o&&o.setAttribute("selected","")}}function Vc(e,t){return ae(t,Element)&&(jc(e,t),Cc(e,t),Hc(e,t),Oc(e,t)),t}async function Lc(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const o={};for(let r=0;r<n.length;r++){const a=n[r].getAttribute("xlink:href");if(a){const c=e.querySelector(a),d=document.querySelector(a);!c&&d&&!o[a]&&(o[a]=await zt(d,t,!0))}}const s=Object.values(o);if(s.length){const r="http://www.w3.org/1999/xhtml",i=document.createElementNS(r,"svg");i.setAttribute("xmlns",r),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const a=document.createElementNS(r,"defs");i.appendChild(a);for(let c=0;c<s.length;c++)a.appendChild(s[c]);e.appendChild(i)}return e}async function zt(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(o=>Ac(o,t)).then(o=>Dc(e,o,t)).then(o=>Vc(e,o)).then(o=>Lc(o,t))}const ys=/url\((['"]?)([^'"]+?)\1\)/g,Fc=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Bc=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Uc(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Zc(e){const t=[];return e.replace(ys,(n,o,s)=>(t.push(s),n)),t.filter(n=>!un(n))}async function Wc(e,t,n,o,s){try{const r=n?mc(t,n):t,i=vn(t);let a;return s||(a=await Nn(r,i,o)),e.replace(Uc(t),`$1${a}$3`)}catch{}return e}function Yc(e,{preferredFontFormat:t}){return t?e.replace(Bc,n=>{for(;;){const[o,,s]=Fc.exec(n)||[];if(!s)return"";if(s===t)return`src: ${o};`}}):e}function xs(e){return e.search(ys)!==-1}async function ws(e,t,n){if(!xs(e))return e;const o=Yc(e,n);return Zc(o).reduce((r,i)=>r.then(a=>Wc(a,i,t,n)),Promise.resolve(o))}async function St(e,t,n){var o;const s=(o=t.style)===null||o===void 0?void 0:o.getPropertyValue(e);if(s){const r=await ws(s,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function Xc(e,t){await St("background",e,t)||await St("background-image",e,t),await St("mask",e,t)||await St("mask-image",e,t)}async function Gc(e,t){const n=ae(e,HTMLImageElement);if(!(n&&!un(e.src))&&!(ae(e,SVGImageElement)&&!un(e.href.baseVal)))return;const o=n?e.src:e.href.baseVal,s=await Nn(o,vn(o),t);await new Promise((r,i)=>{e.onload=r,e.onerror=i;const a=e;a.decode&&(a.decode=r),a.loading==="lazy"&&(a.loading="eager"),n?(e.srcset="",e.src=s):e.href.baseVal=s})}async function Kc(e,t){const o=Ne(e.childNodes).map(s=>bs(s,t));await Promise.all(o).then(()=>e)}async function bs(e,t){ae(e,Element)&&(await Xc(e,t),await Gc(e,t),await Kc(e,t))}function qc(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const o=t.style;return o!=null&&Object.keys(o).forEach(s=>{n[s]=o[s]}),e}const ao={};async function co(e){let t=ao[e];if(t!=null)return t;const o=await(await fetch(e)).text();return t={url:e,cssText:o},ao[e]=t,t}async function lo(e,t){let n=e.cssText;const o=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let a=i.replace(o,"$1");return a.startsWith("https://")||(a=new URL(a,e.url).href),ps(a,t.fetchRequestInit,({result:c})=>(n=n.replace(i,`url(${c})`),[i,c]))});return Promise.all(r).then(()=>n)}function uo(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=e.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=s.exec(o);if(c===null)break;t.push(c[0])}o=o.replace(s,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(i,"gi");for(;;){let c=r.exec(o);if(c===null){if(c=a.exec(o),c===null)break;r.lastIndex=a.lastIndex}else a.lastIndex=r.lastIndex;t.push(c[0])}return t}async function Qc(e,t){const n=[],o=[];return e.forEach(s=>{if("cssRules"in s)try{Ne(s.cssRules||[]).forEach((r,i)=>{if(r.type===CSSRule.IMPORT_RULE){let a=i+1;const c=r.href,d=co(c).then(l=>lo(l,t)).then(l=>uo(l).forEach(f=>{try{s.insertRule(f,f.startsWith("@import")?a+=1:s.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(l=>{console.error("Error loading remote css",l.toString())});o.push(d)}})}catch(r){const i=e.find(a=>a.href==null)||document.styleSheets[0];s.href!=null&&o.push(co(s.href).then(a=>lo(a,t)).then(a=>uo(a).forEach(c=>{i.insertRule(c,s.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",r)}}),Promise.all(o).then(()=>(e.forEach(s=>{if("cssRules"in s)try{Ne(s.cssRules||[]).forEach(r=>{n.push(r)})}catch(r){console.error(`Error while reading CSS rules from ${s.href}`,r)}}),n))}function Jc(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>xs(t.style.getPropertyValue("src")))}async function el(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Ne(e.ownerDocument.styleSheets),o=await Qc(n,t);return Jc(o)}async function tl(e,t){const n=await el(e,t);return(await Promise.all(n.map(s=>{const r=s.parentStyleSheet?s.parentStyleSheet.href:null;return ws(s.cssText,r,t)}))).join(`
`)}async function nl(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await tl(e,t);if(n){const o=document.createElement("style"),s=document.createTextNode(n);o.appendChild(s),e.firstChild?e.insertBefore(o,e.firstChild):e.appendChild(o)}}async function ol(e,t={}){const{width:n,height:o}=gs(e,t),s=await zt(e,t,!0);return await nl(s,t),await bs(s,t),qc(s,t),await Ec(s,n,o)}async function sl(e,t={}){const{width:n,height:o}=gs(e,t),s=await ol(e,t),r=await kt(s),i=document.createElement("canvas"),a=i.getContext("2d"),c=t.pixelRatio||xc(),d=t.canvasWidth||n,l=t.canvasHeight||o;return i.width=d*c,i.height=l*c,t.skipAutoScale||wc(i),i.style.width=`${d}`,i.style.height=`${l}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,i.width,i.height)),a.drawImage(r,0,0,i.width,i.height),i}async function rl(e,t={}){return(await sl(e,t)).toDataURL()}function il(e,t){const n=document.createElement("a");n.setAttribute("download",`${t||"eventcatalog"}.png`),n.setAttribute("href",e),n.click()}const fo=1024,ho=768;function al({filename:e,addPadding:t=!0}){const{getNodes:n}=gt(),o=()=>{const s=_t(n()),r=fo>s.width?fo:s.width,i=ho>s.height?ho:s.height,a=xn(s,r,i,.5,2);document.getElementById("download-visual").style.display="none",document.querySelector(".react-flow__controls").style.display="none",rl(document.querySelector(".react-flow__viewport"),{backgroundColor:"#f1f1f1",width:r,height:i,style:{width:r,height:i,transform:`translate(${a.x}px, ${a.y}px) scale(${a.zoom})`}}).then(c=>{il(c,e),document.getElementById("download-visual").style.display="block",document.querySelector(".react-flow__controls").style.display="block"})};return S.jsx(dt,{position:"top-right",id:"download-visual",children:S.jsxs("button",{className:`hidden md:flex bg-white group download-btn items-center space-x-1 text-[14px] border border-gray-200 px-1 py-0.5 rounded-md hover:bg-gray-100/50 ${t?"mt-14":"-mt-1"}`,onClick:o,children:[S.jsx(hr,{className:"w-4 h-4 group-hover:text-primary"}),S.jsx("span",{className:"group-hover:text-primary",children:"Download visual "})]})})}const mo=e=>e.replace(/\/+/g,"/"),cl=(e,t=!1,n=!1)=>{let o=e;return o=`/clt_crux_arch/${e}`,t&&!n?e.endsWith("/")?o:mo(`${o}/`):mo(o)},go=(e,t)=>cl(`/visualiser/${e.collection}/${e.data.id}/${e.data.version}`,t),ll=({nodes:e,edges:t,title:n,includeBackground:o=!0,linkTo:s="docs",includeKey:r=!0,urlHasTrailingSlash:i,linksToVisualiser:a=!1})=>{const c=y.useMemo(()=>({services:lc,events:uc,commands:fc,step:dc,user:oo,actor:oo,externalSystem:hc}),[]),[d,l,f]=Wa(e),[h,g,v]=Ya(t),{fitView:x}=gt(),E=y.useCallback(()=>{l(k=>k.map(p=>(p.style={...p.style,opacity:1},{...p,animated:!1}))),g(k=>k.map(p=>(p.style={...p.style,opacity:1},{...p,animated:!1})))},[l,g]),m=y.useCallback((k,p)=>{if(a){(p.type==="events"||p.type==="commands")&&Rn(go(p.data.message,i)),p.type==="services"&&Rn(go(p.data.service,i));return}E();const $=new Set;$.add(p.id);const T=h.map(z=>z.source===p.id||z.target===p.id?($.add(z.source),$.add(z.target),{...z,style:{...z.style,opacity:1},animated:!0}):{...z,style:{...z.style,opacity:.1},animated:!1}),j=d.map(z=>$.has(z.id)?{...z,style:{...z.style,opacity:1}}:{...z,style:{...z.style,opacity:.1}});l(j),g(T),x({padding:.2,duration:800,nodes:j.filter(z=>$.has(z.id))})},[d,h,l,g,E,x]),N=y.useCallback(()=>{E(),x({duration:800})},[E,x]);return S.jsxs(ds,{nodeTypes:c,nodes:d,edges:h,fitView:!0,onNodesChange:f,onEdgesChange:v,connectionLineType:ve.SmoothStep,nodeOrigin:[.1,.1],onNodeClick:m,onPaneClick:N,children:[n&&S.jsx(dt,{position:"top-right",children:S.jsxs("span",{className:"block shadow-sm bg-white text-xl z-10 text-black px-4 py-2 border-gray-200 rounded-md border",children:[S.jsx("strong",{children:"Visualiser"})," | ",n]})}),S.jsx(al,{filename:n,addPadding:!!n}),o&&S.jsx(cc,{color:"#bbb",gap:16}),o&&S.jsx(tc,{}),r&&S.jsx(dt,{position:"bottom-right",children:S.jsxs("div",{className:" bg-white font-light px-4 text-[14px] shadow-md py-1 rounded-md",children:[S.jsx("span",{className:"font-bold",children:"Key"}),S.jsxs("ul",{children:[S.jsxs("li",{className:"flex space-x-2 items-center text-[12px]",children:[S.jsx("span",{className:"w-2 h-2 bg-orange-500 block"}),S.jsx("span",{className:"block",children:"Event"})]}),S.jsxs("li",{className:"flex space-x-2 items-center text-[12px]",children:[S.jsx("span",{className:"w-2 h-2 bg-pink-500 block"}),S.jsx("span",{className:"block",children:"Service"})]}),S.jsxs("li",{className:"flex space-x-2 items-center text-[12px]",children:[S.jsx("span",{className:"w-2 h-2 bg-blue-500 block"}),S.jsx("span",{className:"block",children:"Command"})]})]})]})})]})},pl=({id:e,nodes:t,edges:n,title:o,href:s,linkTo:r="docs",hrefLabel:i="Open in visualizer",includeKey:a=!0,footerLabel:c,urlHasTrailingSlash:d,linksToVisualiser:l=!1})=>{const[f,h]=y.useState(null);return y.useEffect(()=>{h(document.getElementById(`${e}-portal`))},[]),f?S.jsx("div",{children:er.createPortal(S.jsxs(Sn,{children:[S.jsx(ll,{edges:n,nodes:t,title:o,linkTo:r,includeKey:a,urlHasTrailingSlash:d,linksToVisualiser:l}),S.jsxs("div",{className:"flex justify-between",children:[c&&S.jsx("div",{className:"py-2 w-full text-left ",children:S.jsx("span",{className:" text-sm no-underline py-2 text-gray-300",children:c})}),s&&S.jsx("div",{className:"py-2 w-full text-right",children:S.jsxs("a",{className:" text-sm no-underline py-2 text-gray-800 hover:text-primary",href:s,children:[i," →"]})})]})]}),f)}):null};export{pl as default};
